import{L as xt,a0 as wt,z as m,ac as Z,O as Vt,P as s,A as r,Q as c,x as u,C as _,I as t,R as i,Y as n,F as v,ad as y,ah as tt,ai as et,af as g,D as j,B as st,ae as C,al as Ct,E as lt,aA as Bt,T as k,U as b,aj as $t,G as St,H as Lt}from"./index-fe37e121.js";import{_ as Tt}from"./refresh-9fe172ae.js";import{_ as It,M as Ut,a as Ft,b as qt,c as Nt}from"./MarqueeText.common-dbdca6cf.js";import{_ as At}from"./rightImg-2896a6bb.js";import{_ as Dt}from"./search-e322bae4.js";import{_ as Mt}from"./close-d0614903.js";import{P as Ot}from"./topWrap-2bbd45de.js";import{_ as Et}from"./_plugin-vue_export-helper-c27b6911.js";import{V as ot}from"./VSelect-ce533b08.js";import{V as at}from"./VTextField-b46db7f3.js";import{V as nt,a as it}from"./VCarouselItem-657fd701.js";import{V as rt,a as Pt,b as Rt}from"./VList-ae58a1cf.js";import{V as jt,a as z}from"./VTabs-eb3a4ac9.js";import{V as zt}from"./VBottomSheet-7ae52828.js";import"./_commonjsHelpers-de833af9.js";/* empty css                                                                */import"./VInput-c9f89178.js";import"./index-8dc6e3f7.js";import"./VVirtualScroll-14dd4005.js";import"./VCheckboxBtn-ec67e07f.js";import"./VSelectionControl-08f10123.js";import"./VChip-70429e89.js";import"./VWindowItem-c2da1a13.js";import"./ssrBoot-315b6fcc.js";import"./VDivider-d268b081.js";const p=U=>(St("data-v-97eeb3b8"),U=U(),Lt(),U),Ht={class:"hores-race-lamp flexStart"},Gt=p(()=>t("img",{src:Ft,alt:"",class:"refresh-data"},null,-1)),Kt=p(()=>t("span",{style:{color:"#f90"}}," 该平台可以直接扩大股票配资客户的交易资金，使股票配资客户获得充裕的资金，成本低，盈利100%属于用户。",-1)),Qt={class:"row-tab-box flexBetween"},Yt=p(()=>t("h2",null,"合约",-1)),Jt=p(()=>t("img",{src:At,alt:"",class:"img-right"},null,-1)),Wt={class:"row-tab-box flexBetween"},Xt=p(()=>t("h2",null,"股票名称/代码",-1)),Zt={class:"flexEnd"},te={class:"flexBetween new-title-box"},ee=p(()=>t("img",{src:qt,alt:"",class:"img-right"},null,-1)),se={class:"flexBetween controls-box"},le={style:{},class:"controls-left"},oe=p(()=>t("div",{class:"flexBetween buy-sell-box"},[t("p",{class:"buy-box"},"买入")],-1)),ae={key:0,class:"buy"},ne={class:"up-down-number flexBetween"},ie={class:"roseColor"},re={class:"fallColor"},ce={class:"input-box",style:{"margin-top":"15px"}},de={class:"component-box flexBetween"},ue={class:"up-down-number flexBetween"},_e={class:"roseColor"},pe={class:"fallColor"},me={key:1,class:"sell py-10"},ve={class:"controls-right"},fe={key:0,class:"new-box"},he={class:"fallColor"},ge=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px",margin:"5px 0"}},null,-1)),ke={class:"pinkColor"},be={key:1,class:"new-box"},ye=p(()=>t("div",{class:"flexBetween records-list pr-2"},[t("p",null,"时间"),t("p",null,"价格"),t("p",null,"量")],-1)),xe={class:"pinkColor"},we={class:"flexAroud"},Ve={class:"flexCenter cut-detail"},Ce=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"5px",margin:"10px 0"}},null,-1)),Be={class:"table-box flexStart"},$e={key:0,class:"new-box"},Se=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"成本"),t("th",{style:{"text-align":"right"}},"数量"),t("th",{style:{"text-align":"right"},class:"cutUp"},"浮动盈亏"),t("th",{style:{"text-align":"right"},class:"cutUp"},"操作")],-1)),Le=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Te={class:"tr-one"},Ie={class:"tr-two text-right"},Ue={class:"tr-two-number"},Fe={class:"tr-three",style:{"text-align":"right"}},qe={class:"tr-four",style:{"text-align":"right"}},Ne={class:"text-right"},Ae={key:1,class:"new-box"},De={class:"tab-box"},Me={key:0},Oe=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间"),t("th",null,"操作")],-1)),Ee=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Pe={class:"tr-one"},Re={class:"tr-two",style:{"text-align":"right"}},je={class:"tr-two-number"},ze={class:"tr-three",style:{"text-align":"right"}},He={class:"tr-four",style:{"text-align":"right"}},Ge=["onClick"],Ke={key:1},Qe=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"金额"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),Ye=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Je={class:"tr-one"},We={class:"tr-two",style:{"text-align":"right"}},Xe={class:"tr-two-number"},Ze={class:"tr-three",style:{"text-align":"right"}},ts={class:"tr-four",style:{"text-align":"right"}},es={key:2},ss=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),ls=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),os={class:"tr-one"},as={class:"tr-two",style:{"text-align":"right"}},ns={class:"tr-two-number"},is={class:"tr-three",style:{"text-align":"right"}},rs={class:"tr-four",style:{"text-align":"right"}},cs={class:"flexBetween sheet-top"},ds=p(()=>t("div",{class:"sheet-sure"},[v("请选择您的合约"),t("span",null,"[新开合约]")],-1)),us={class:"flexBetween type-list"},_s={class:"list-select",src:Nt,alt:""},ps={__name:"Trading",setup(U){const H=xt(),B=wt(),f=m(0),L=m(1),w=m(0),$=m(0),S=m(0),D=m(0),T=m(null),M=m(""),I=m(!1);m(!1),m("");const h=Z({amount:0,limit:0,order_id:""}),V=m("0.000001"),O=m("平安银行"),ct=m("000001"),F=Z({buy:[],sell:[]}),q=m("market_price"),dt=[{title:"市价交易",key:"market_price"},{title:"限价委托",key:"limit_price"}],G=m([]);Vt(()=>{B.query.code&&(ct.value=B.query.code),B.query.prefix?V.value=B.query.prefix:V.value=s.state.trading.prefix,B.query.title?O.value=B.query.title:O.value=s.state.trading.title,K(),s.getters.token?s.dispatch("contract/getMinList"):R.value="请登录选择合约",_t(),P(),N(0)});const K=()=>{s.state.market.stock_new_info.f107+"."+s.state.market.stock_new_info.f57!=V.value&&s.dispatch("market/getStockNewInfo",V.value),s.state.market.stock_new_info.f107<2&&s.dispatch("market/getBuySellFive",V.value).then(e=>{F.buy=e.buy,F.sell=e.sell})},E=l=>{S.value=l,l==0||l==2?(s.commit("trading/clearTrustList"),N(l)):l==1&&Q()},ut=()=>{console.log(T.value)},P=()=>{s.dispatch("trading/getActiveList")},_t=async()=>{const l=await s.dispatch("market/getStockFenShi",V.value);G.value=pt(l)},pt=l=>l.map(a=>{const d=a.split(",");return{date:d[0],price:parseFloat(d[1]),limit:parseInt(d[2],10)}}),Q=()=>{s.dispatch("trading/getSuccessList")},mt=l=>{s.dispatch("trading/cancelOrder",l).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"取消成功！"}),N(0)})},vt=()=>{if(!T.value){s.dispatch("snackbar/warning",{active:!0,body:"请选择订单！"});return}s.dispatch("trading/sell",{key:T.value}).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"Success"}),P(),Q()})},Y=l=>{if(l=="a"&&(f.value=f.value+100),l=="c"&&f.value>0){let e=f.value-100;e>0?f.value=e:f.value=0}},ft=()=>{if(!s.getters.token){s.dispatch("snackbar/warning",{active:!0,body:"请登录！"});return}if(h.order_id==""){s.dispatch("snackbar/warning",{active:!0,body:"请选择合约！"});return}const l={symbol:V.value,number:f.value,contract:h.order_id,type:q.value,title:O.value,price:M.value};if(l.number<100&&l.number%100!==0){s.dispatch("snackbar/warning",{active:!0,body:"数量必须是100的倍数"});return}s.dispatch("trading/buy",l).then(e=>{s.dispatch("snackbar/success",{active:!0,body:"购买成功"}),s.dispatch("contract/getMinList").then(()=>{W(w.value)}),P(),N(0)})},ht=l=>{H.push(l)},N=l=>{s.dispatch("trading/getTrustList",l)},A=(l,e)=>{if(h.limit<=0)return!1;let a=Math.floor(h.limit/l);if(a>=100){let d=gt(a);d>h.limit?f.value=d-100:f.value=d}else f.value=100;L.value=e},gt=l=>{const e=l%100;return e===0?l:l+(100-e)},kt=l=>{if(l<0)return"green";if(l===0||l==="")return"black";if(l>0)return"red"},R=m("请选择合约"),J=m(0),W=l=>{J.value=l,R.value=s.state.contract.minList[l].contract_type_title+s.state.contract.minList[l].contract_limit_limit+"倍",h.amount=s.state.contract.minList[l].balance,h.limit=parseFloat(h.amount/C(s.state.market.stock_new_info.f43,s.state.market.stock_new_info.f59)).toFixed(2),h.order_id=s.state.contract.minList[l].order_id},bt=l=>(l=l.toString(),l.replace(/(\d{2})(\d{2})(\d{2})/,"$1:$2")),X=l=>l>0?"+"+l:l,yt=(l,e,a,d)=>{H.push({path:l,query:{code:a,title:e,prefix:d}})};return(l,e)=>(r(),c("div",null,[u(Ot,null,{headerCenter:_(()=>[v("交易")]),headerRight:_(()=>[t("img",{src:Tt,alt:"",class:"refresh-data",onClick:K})]),_:1}),t("div",Ht,[Gt,u(i(Ut),{repeat:1},{default:_(()=>[Kt]),_:1})]),t("div",Qt,[Yt,t("div",{class:"flexEnd",onClick:e[0]||(e[0]=a=>I.value=!0)},[t("p",null,n(R.value),1),Jt])]),t("div",Wt,[Xt,t("div",Zt,[t("p",null,[v(n(i(s).state.market.stock_new_info.f58),1),t("span",null,"("+n(i(Ct)(i(s).state.market.stock_new_info.f57,i(s).state.market.stock_new_info.f107))+")",1)]),t("img",{src:Dt,alt:"",class:"img-search",onClick:e[1]||(e[1]=a=>ht("/Search"))})])]),t("div",te,[t("p",null,[v(" 最新 "),t("span",{class:y("text-"+kt(i(C)(i(s).state.market.stock_new_info.f169,i(s).state.market.stock_new_info.f59)))},n(i(C)(i(s).state.market.stock_new_info.f43,i(s).state.market.stock_new_info.f59))+" "+n(X(i(C)(i(s).state.market.stock_new_info.f169,i(s).state.market.stock_new_info.f59)))+" "+n(X(i(C)(i(s).state.market.stock_new_info.f170,i(s).state.market.stock_new_info.f59))+"%"),3)]),t("div",null,[t("img",{src:It,alt:"",onClick:e[2]||(e[2]=a=>yt("/ChanrtPage",i(s).state.market.stock_new_info.f58,i(s).state.market.stock_new_info.f57,i(s).state.market.stock_new_info.f107)),class:"img-right"}),ee])]),t("div",se,[t("div",le,[oe,D.value==0?(r(),c("div",ae,[u(ot,{label:"类型",items:dt,"item-title":"title","item-value":"key",modelValue:q.value,"onUpdate:modelValue":e[3]||(e[3]=a=>q.value=a),variant:"solo-filled","hide-details":"",class:"mt-2"},null,8,["modelValue"]),t("div",ne,[t("p",null,[v(" 涨停"),t("span",ie,n(i(C)(i(s).state.market.stock_new_info.f51,i(s).state.market.stock_new_info.f59)),1)]),t("p",null,[v(" 跌停"),t("span",re,n(i(C)(i(s).state.market.stock_new_info.f52,i(s).state.market.stock_new_info.f59)),1)])]),t("div",ce,[tt(u(at,{type:"string",modelValue:M.value,"onUpdate:modelValue":e[4]||(e[4]=a=>M.value=a),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":"",label:"价格"},null,8,["modelValue"]),[[et,q.value=="limit_price"]]),u(at,{type:"number",modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=a=>f.value=a),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":""},{append:_(()=>[u(lt,{color:"black",onClick:e[5]||(e[5]=a=>Y("c")),class:"down-num"},{default:_(()=>[v(" mdi-minus ")]),_:1}),u(lt,{color:"black",onClick:e[6]||(e[6]=a=>Y("a")),class:"up-num"},{default:_(()=>[v(" mdi-plus ")]),_:1})]),_:1},8,["modelValue"])]),t("div",de,[t("p",{class:y(L.value==1?"redBg":""),onClick:e[8]||(e[8]=a=>A(4,1))}," 1/4 ",2),t("p",{class:y(L.value==2?"redBg":""),onClick:e[9]||(e[9]=a=>A(3,2))}," 1/3 ",2),t("p",{class:y(L.value==3?"redBg":""),onClick:e[10]||(e[10]=a=>A(2,3))}," 1/2 ",2),t("p",{class:y(L.value==4?"redBg":""),onClick:e[11]||(e[11]=a=>A(1,4))}," 全仓 ",2)]),t("div",ue,[t("p",null,[v(" 交易额"),t("span",_e,n(h.amount),1)]),t("p",null,[v(" 可买股数"),t("span",pe,n(h.limit),1)])])])):g("",!0),D.value==1?(r(),c("div",me,[u(ot,{label:"请选择股票",modelValue:T.value,"onUpdate:modelValue":[e[12]||(e[12]=a=>T.value=a),ut],items:i(s).state.trading.active_list,"item-title":"title","item-value":"id",variant:"underlined"},{item:_(({props:a,item:d})=>[u(rt,Bt(a,{subtitle:d.raw.number+"/"+d.raw.unrealized_profit}),null,16,["subtitle"])]),_:1},8,["modelValue","items"]),u(j,{block:"",class:"mt-4",color:"success",onClick:vt},{default:_(()=>[v("卖出")]),_:1})])):g("",!0)]),t("div",ve,[u(nt,{"show-arrows":!1,"hide-delimiters":"",modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=a=>$.value=a),height:"auto"},{default:_(()=>[(r(),c(k,null,b(2,(a,d)=>u(it,{key:d},{default:_(()=>[d==0?(r(),c("div",fe,[t("div",null,[(r(!0),c(k,null,b(F.sell,(o,x)=>(r(),c("div",{class:"flexBetween records-list",key:x},[t("p",null,"卖"+n(x+1),1),t("p",he,n(o.price),1),t("p",null,n(o.vol),1)]))),128)),ge,(r(!0),c(k,null,b(F.buy,(o,x)=>(r(),c("div",{class:"flexBetween records-list",key:x},[t("p",null,"买"+n(x+1),1),t("p",ke,n(o.price),1),t("p",null,n(o.vol),1)]))),128))])])):g("",!0),d==1?(r(),c("div",be,[ye,(r(!0),c(k,null,b(G.value,(o,x)=>(r(),c("div",{key:x,class:"flexBetween records-list pr-2"},[t("p",null,n(bt(o.date)),1),t("p",xe,n(o.price),1),t("p",null,n(o.limit),1)]))),128))])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"])])]),t("div",we,[D.value==0?(r(),st(j,{key:0,class:"sure-btn",onClick:ft},{default:_(()=>[v("交易")]),_:1})):g("",!0),t("div",Ve,[t("p",{class:y($.value==0?"roseColor":""),onClick:e[14]||(e[14]=a=>$.value=0)},"+档",2),t("p",{class:y($.value==1?"roseColor":""),onClick:e[15]||(e[15]=a=>$.value=1)},"明细",2)])]),Ce,t("div",Be,[t("p",{class:y(w.value==0?"active-tab":""),onClick:e[16]||(e[16]=a=>w.value=0)}," 持仓 ",2),t("p",{class:y(w.value==1?"active-tab":""),onClick:e[17]||(e[17]=a=>w.value=1)}," 订单 ",2)]),u(nt,{"show-arrows":!1,"hide-delimiters":"",modelValue:w.value,"onUpdate:modelValue":e[22]||(e[22]=a=>w.value=a),height:"auto"},{default:_(()=>[(r(),c(k,null,b(2,(a,d)=>u(it,{key:d},{default:_(()=>[d==0?(r(),c("div",$e,[t("table",null,[t("tbody",null,[Se,Le,(r(!0),c(k,null,b(i(s).state.trading.active_list,o=>(r(),c("tr",{class:"tr-list",key:o.code},[t("td",Te,[t("p",null,n(o.title),1),t("span",null,n(o.code),1)]),t("td",Ie,[t("div",Ue,n(o.cost),1)]),t("td",Fe,[t("span",null,n(o.number),1)]),t("td",qe,[t("p",null,n(i($t)(o.price,o.sell,o.number_ret)),1)]),t("th",Ne,[u(j,{variant:"outlined",color:"red",to:"/Sell?order_id="+o.id,size:"x-small"},{default:_(()=>[v(" 卖出 ")]),_:2},1032,["to"])])]))),128))])])])):g("",!0),d==1?(r(),c("div",Ae,[t("div",De,[u(jt,{modelValue:S.value,"onUpdate:modelValue":e[21]||(e[21]=o=>S.value=o),"bg-color":"white",color:"black","align-tabs":"left"},{default:_(()=>[u(z,{onClick:e[18]||(e[18]=o=>E(0))},{default:_(()=>[v("待成交")]),_:1}),u(z,{onClick:e[19]||(e[19]=o=>E(1))},{default:_(()=>[v("已成交")]),_:1}),u(z,{onClick:e[20]||(e[20]=o=>E(2))},{default:_(()=>[v("已撤单")]),_:1})]),_:1},8,["modelValue"])]),t("table",null,[S.value==0?(r(),c("tbody",Me,[Oe,Ee,(r(!0),c(k,null,b(i(s).state.trading.trust_list,o=>(r(),c("tr",{class:"tr-list",key:o.code},[t("td",Pe,[t("p",null,n(o.title),1),t("span",null,n(o.code),1)]),t("td",Re,[t("div",je,n(o.buy_price),1)]),t("td",ze,[t("span",null,n(o.number)+"/委托",1)]),t("td",He,[t("p",null,n(o.date),1)]),t("th",{onClick:x=>mt(o.id)},"撤销",8,Ge)]))),128))])):g("",!0),S.value==1?(r(),c("tbody",Ke,[Qe,Ye,(r(!0),c(k,null,b(i(s).state.trading.success_list,o=>(r(),c("tr",{class:"tr-list",key:o.symbol_code},[t("td",Je,[t("p",null,n(o.title),1),t("span",null,n(o.symbol_code),1)]),t("td",We,[t("div",Xe,n(o.amount),1)]),t("td",Ze,[t("span",null,n(o.number)+"/"+n(o.type_string),1)]),t("td",ts,[t("p",null,n(o.date),1)])]))),128))])):g("",!0),S.value==2?(r(),c("tbody",es,[ss,ls,(r(!0),c(k,null,b(i(s).state.trading.trust_list,o=>(r(),c("tr",{class:"tr-list",key:o.code},[t("td",os,[t("p",null,n(o.title),1),t("span",null,n(o.code),1)]),t("td",as,[t("div",ns,n(o.buy_price),1)]),t("td",is,[t("span",null,n(o.number)+"/委托",1)]),t("td",rs,[t("p",null,n(o.date),1)])]))),128))])):g("",!0)])])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"]),u(i(zt),{modelValue:I.value,"onUpdate:modelValue":e[24]||(e[24]=a=>I.value=a)},{default:_(()=>[u(Pt,{class:"pb-5"},{default:_(()=>[t("div",cs,[ds,t("img",{src:Mt,alt:"",onClick:e[23]||(e[23]=a=>I.value=!1)})]),(r(!0),c(k,null,b(i(s).state.contract.minList,(a,d)=>(r(),st(rt,{class:"flexCenter",key:a.order_id,onClick:o=>{I.value=!1,W(d)}},{default:_(()=>[t("div",us,[u(Rt,null,{default:_(()=>[t("h3",null,[v(n(a.contract_type_title+a.contract_limit_limit)+"倍- ",1),t("span",null,n(a.balance),1),v("元 ")]),t("p",null,"合约号:"+n(a.order_id),1)]),_:2},1024),tt(t("img",_s,null,512),[[et,d==J.value]])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]))}},Os=Et(ps,[["__scopeId","data-v-97eeb3b8"]]);export{Os as default};
