import{_ as O}from"./myCenter-f106fed0.js";import{u as j,a as M,p as S}from"./vaildRule-8d293acc.js";import{p as J,af as K,l as Q,n as W,ag as X,q as Y,ah as G,ai as H,t as Z,v as ee,x as ae,aj as te,y as le,ak as se,c as P,_ as oe,al as ne,D as re,am as ie,E as de,an as ue,ao as ce,F as me,ap as ve,C as pe,aq as fe,J as t,ar as ye,R as be,as as T,Q as g,at as Ve,K as ke,r as f,a as ge,o as _e,ae as xe,N as $,a0 as Ce,Y as r,P as i,O as he,aa as we,S as y,a1 as m,T as b,W as Se,X as Pe}from"./index-82bd6b72.js";import{_ as Ie}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Be}from"./VForm-827e5939.js";import{V as v}from"./VTextField-a04f56ef.js";import{V as Ae}from"./VRow-4d1d65fc.js";import{V as L}from"./VCol-10245cd7.js";import{c as Te}from"./createSimpleFunctional-00bdc480.js";import"./VInput-f11a32e0.js";import"./index-c90db18d.js";import"./index-9c5d7571.js";const $e=Te("v-alert-title"),Le=["success","info","warning","error"],Re=J({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:K,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Le.includes(e)},...Q(),...W(),...X(),...Y(),...G(),...H(),...Z(),...ee(),...ae(),...te({variant:"flat"})},"VAlert"),qe=le()({name:"VAlert",props:Re(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,_){let{emit:a,slots:l}=_;const d=se(e,"modelValue"),u=P(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),V=P(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:x}=oe(e),{colorClasses:C,colorStyles:k,variantClasses:h}=ne(V),{densityClasses:c}=re(e),{dimensionStyles:n}=ie(e),{elevationClasses:s}=de(e),{locationStyles:o}=ue(e),{positionClasses:q}=ce(e),{roundedClasses:D}=me(e),{textColorClasses:F,textColorStyles:z}=ve(pe(e,"borderColor")),{t:N}=fe(),I=P(()=>({"aria-label":N(e.closeLabel),onClick(w){d.value=!1,a("click:close",w)}}));return()=>{const w=!!(l.prepend||u.value),U=!!(l.title||e.title),E=!!(l.close||e.closable);return d.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},x.value,C.value,c.value,s.value,q.value,D.value,h.value,e.class],style:[k.value,n.value,o.value,e.style],role:"alert"},{default:()=>{var B,A;return[ye(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",F.value],style:z.value},null),w&&t("div",{key:"prepend",class:"v-alert__prepend"},[l.prepend?t(T,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:e.density,icon:u.value,size:e.prominent?44:28}}},l.prepend):t(be,{key:"prepend-icon",density:e.density,icon:u.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[U&&t($e,{key:"title"},{default:()=>{var p;return[((p=l.title)==null?void 0:p.call(l))??e.title]}}),((B=l.text)==null?void 0:B.call(l))??e.text,(A=l.default)==null?void 0:A.call(l)]),l.append&&t("div",{key:"append",class:"v-alert__append"},[l.append()]),E&&t("div",{key:"close",class:"v-alert__close"},[l.close?t(T,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var p;return[(p=l.close)==null?void 0:p.call(l,{props:I.value})]}}):t(g,Ve({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},I.value),null)])]}})}}}),R=e=>(Se("data-v-c7932fce"),e=e(),Pe(),e),De={class:"login-box"},Fe=R(()=>r("h1",null,"注册",-1)),ze=R(()=>r("div",{class:"log-top"},[r("img",{src:O})],-1)),Ne={class:"login-cont"},Ue={class:"flexEnd inlin-customer"},Ee={class:"sign-in-box"},Oe={__name:"SignIn",setup(e){const _=ke();f("password");const a=ge({username:"",phone:"",code:"",password:"",passwordAgo:"",recom:""}),l=f(null),d=f(!1),u=()=>{d.value=!0;let n=60;l.value=window.setInterval(()=>{n==0?V():n--},1e3)},V=()=>{clearInterval(l.value),d.value=!1},x=()=>{if(a.phone.length<6||a.phone.length>11){m.dispatch("snackbar/warning",{active:!0,body:"请输入正确的手机号码"});return}u(),m.dispatch("user/sendSms",a.phone).then(n=>{m.dispatch("snackbar/success",{active:!0,body:"发送成功"})}).catch(()=>{V()})},C=async()=>{const{valid:n}=await k.ctx.$refs.form.validate();if(n){if(a.password!=a.passwordAgo){m.dispatch("snackbar/warning",{active:!0,body:"两次密码不一致"});return}m.dispatch("user/register",{user_name:a.username,mobile:a.phone,password:a.password,verify_code:a.code,referrer:a.recom}).then(s=>{m.dispatch("snackbar/success",{active:!0,body:"注册成功！"}),c("Login")})}};let k=f();const h=f(0);_e(()=>{k=xe()});const c=n=>{_.push(n)};return(n,s)=>($(),Ce("div",De,[Fe,ze,r("div",Ne,[t(Be,{ref:"form"},{default:i(()=>[t(v,{variant:"underlined",modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=o=>a.username=o),required:"",counter:12,clearable:"",label:"账号","hide-details":"auto",rules:b(j)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.phone,"onUpdate:modelValue":s[1]||(s[1]=o=>a.phone=o),required:"",counter:12,clearable:"",active:"",label:"手机号","hide-details":"auto",rules:b(M)},null,8,["modelValue","rules"]),t(Ae,{class:"ma-0 pa-0"},{default:i(()=>[t(L,{cols:"8",class:"pa-0"},{default:i(()=>[t(v,{variant:"underlined",modelValue:a.code,"onUpdate:modelValue":s[2]||(s[2]=o=>a.code=o),required:"",counter:4,label:"验证码",type:"Number",rules:b(S)},null,8,["modelValue","rules"])]),_:1}),t(L,{cols:"4",class:"px-1"},{default:i(()=>[t(g,{class:"text-none",color:"success",rounded:"",block:"",variant:"outlined",onClick:x,disabled:d.value},{default:i(()=>[y(" 发送 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(v,{variant:"underlined",modelValue:a.password,"onUpdate:modelValue":s[3]||(s[3]=o=>a.password=o),required:"",counter:12,label:"密码",type:"password",rules:b(S)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.passwordAgo,"onUpdate:modelValue":s[4]||(s[4]=o=>a.passwordAgo=o),required:"",counter:12,label:"确认密码",type:"password",rules:b(S)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.recom,"onUpdate:modelValue":s[5]||(s[5]=o=>a.recom=o),required:"",counter:12,label:"推荐人"},null,8,["modelValue"]),r("div",Ue,[r("p",null,[y(" 提示收不到验证码时请联系 "),r("span",{onClick:s[6]||(s[6]=o=>c("/ForgertPhone"))},"在线客服")])])]),_:1},512),h.value>55?($(),he(qe,{key:0,text:"发送成功"})):we("",!0),t(g,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:C},{default:i(()=>[y(" 注册 ")]),_:1}),t(g,{color:"rgb(0, 191, 255)",class:"mt-4",size:"x-large",block:"",onClick:s[7]||(s[7]=o=>c("/"))},{default:i(()=>[y(" 返回 ")]),_:1}),r("div",Ee,[y(" 已有账号?"),r("span",{onClick:s[8]||(s[8]=o=>c("/Login"))},"马上登陆")])])]))}},aa=Ie(Oe,[["__scopeId","data-v-c7932fce"]]);export{aa as default};
