import{m as ge,V as N}from"./VTextField-f5aa5195.js";import{p as H,cm as Q,cn as Ve,cV as ee,y as te,an as U,co as we,e as Ce,c as x,r as K,i as be,cW as j,s as $,b as ke,M as ne,aw as F,I as le,ad as z,J as s,av as ae,cp as oe,bs as Pe,cH as J,cX as Se,cY as W,ai as xe,cZ as De,cJ as Te,at as Ae,a4 as O,R as Y,S as Ee,c_ as X,c$ as Z,cS as Ie}from"./index-1920e71a.js";import{d as Fe}from"./VInput-1e810e88.js";import{m as Le,u as Re,a as Be,V as G}from"./VList-4093fba1.js";import{V as Me}from"./VVirtualScroll-910194f7.js";import{V as Ke}from"./VCheckboxBtn-48d8e9a9.js";import{V as Oe}from"./VChip-761c384f.js";const Ue=H({id:String,...Q(Ve({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ee}}),["absolute"])},"VMenu"),He=te()({name:"VMenu",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,L){let{slots:l}=L;const c=U(e,"modelValue"),{scopeId:h}=we(),E=Ce(),S=x(()=>e.id||`v-menu-${E}`),t=K(),a=be(j,null),k=$(0);ke(j,{register(){++k.value},unregister(){--k.value},closeParents(){setTimeout(()=>{k.value||(c.value=!1,a==null||a.closeParents())},40)}});async function D(o){var y,b,T;const d=o.relatedTarget,f=o.target;await Pe(),c.value&&d!==f&&((y=t.value)!=null&&y.contentEl)&&((b=t.value)!=null&&b.globalTop)&&![document,t.value.contentEl].includes(f)&&!t.value.contentEl.contains(f)&&((T=J(t.value.contentEl)[0])==null||T.focus())}ne(c,o=>{o?(a==null||a.register(),document.addEventListener("focusin",D,{once:!0})):(a==null||a.unregister(),document.removeEventListener("focusin",D))});function r(){a==null||a.closeParents()}function g(o){var d,f,y;e.disabled||o.key==="Tab"&&(Se(J((d=t.value)==null?void 0:d.contentEl,!1),o.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(c.value=!1,(y=(f=t.value)==null?void 0:f.activatorEl)==null||y.focus()))}function p(o){var f;if(e.disabled)return;const d=(f=t.value)==null?void 0:f.contentEl;d&&c.value?o.key==="ArrowDown"?(o.preventDefault(),W(d,"next")):o.key==="ArrowUp"&&(o.preventDefault(),W(d,"prev")):["ArrowDown","ArrowUp"].includes(o.key)&&(c.value=!0,o.preventDefault(),setTimeout(()=>setTimeout(()=>p(o))))}const R=x(()=>F({"aria-haspopup":"menu","aria-expanded":String(c.value),"aria-owns":S.value,onKeydown:p},e.activatorProps));return le(()=>{const[o]=z.filterProps(e);return s(z,F({ref:t,class:["v-menu",e.class],style:e.style},o,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,absolute:!0,activatorProps:R.value,"onClick:outside":r,onKeydown:g},h),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return s(ae,{root:"VMenu"},{default:()=>{var b;return[(b=l.default)==null?void 0:b.call(l,...f)]}})}})}),oe({id:S,ΨopenChildren:k},t)}});function $e(e,L){const l=$(!1);let c;function h(t){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function E(){await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>{if(l.value){const a=ne(l,()=>{a(),t()})}else t()})}async function S(t){var D,r;if(t.key==="Tab"&&((D=L.value)==null||D.focus()),!["PageDown","PageUp","Home","End"].includes(t.key))return;const a=(r=e.value)==null?void 0:r.$el;if(!a)return;(t.key==="Home"||t.key==="End")&&a.scrollTo({top:t.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await E();const k=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(t.key==="PageDown"||t.key==="Home"){const g=a.getBoundingClientRect().top;for(const p of k)if(p.getBoundingClientRect().top>=g){p.focus();break}}else{const g=a.getBoundingClientRect().bottom;for(const p of[...k].reverse())if(p.getBoundingClientRect().bottom<=g){p.focus();break}}}return{onListScroll:h,onListKeydown:S}}const _e=H({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:xe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:De},itemColor:String,...Le({itemChildren:!1})},"Select"),qe=H({..._e(),...Q(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Te({transition:{component:ee}})},"VSelect"),Ze=te()({name:"VSelect",props:qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,L){let{slots:l}=L;const{t:c}=Ae(),h=K(),E=K(),S=U(e,"menu"),t=x({get:()=>S.value,set:n=>{var i;S.value&&!n&&((i=E.value)!=null&&i.ΨopenChildren)||(S.value=n)}}),{items:a,transformIn:k,transformOut:D}=Re(e),r=U(e,"modelValue",[],n=>k(n===null?[null]:Ie(n)),n=>{const i=D(n);return e.multiple?i:i[0]??null}),g=Fe(),p=x(()=>r.value.map(n=>a.value.find(i=>{const m=X(i.raw,e.itemValue),A=X(n.raw,e.itemValue);return m===void 0||A===void 0?!1:e.returnObject?e.valueComparator(m,A):e.valueComparator(i.value,n.value)})||n)),R=x(()=>p.value.map(n=>n.props.value)),o=$(!1),d=x(()=>t.value?e.closeText:e.openText);let f="",y;const b=x(()=>e.hideSelected?a.value.filter(n=>!p.value.some(i=>i===n)):a.value),T=x(()=>e.hideNoData&&!a.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),I=K(),{onListScroll:ue,onListKeydown:ie}=$e(I,h);function se(n){e.openOnClear&&(t.value=!0)}function ce(){T.value||(t.value=!t.value)}function re(n){var u,V;if(!n.key||e.readonly||g!=null&&g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(t.value=!0),["Escape","Tab"].includes(n.key)&&(t.value=!1),n.key==="Home"?(u=I.value)==null||u.focus("first"):n.key==="End"&&((V=I.value)==null||V.focus("last"));const i=1e3;function m(v){const P=v.key.length===1,w=!v.ctrlKey&&!v.metaKey&&!v.altKey;return P&&w}if(e.multiple||!m(n))return;const A=performance.now();A-y>i&&(f=""),f+=n.key.toLowerCase(),y=A;const M=a.value.find(v=>v.title.toLowerCase().startsWith(f));M!==void 0&&(r.value=[M])}function B(n){if(e.multiple){const i=R.value.findIndex(m=>e.valueComparator(m,n.value));if(i===-1)r.value=[...r.value,n];else{const m=[...r.value];m.splice(i,1),r.value=m}}else r.value=[n],t.value=!1}function de(n){var i;(i=I.value)!=null&&i.$el.contains(n.relatedTarget)||(t.value=!1)}function fe(){var n;o.value&&((n=h.value)==null||n.focus())}function ve(n){o.value=!0}function me(n){if(n==null)r.value=[];else if(Z(h.value,":autofill")||Z(h.value,":-webkit-autofill")){const i=a.value.find(m=>m.title===n);i&&B(i)}else h.value&&(h.value.value="")}return le(()=>{const n=!!(e.chips||l.chip),i=!!(!e.hideNoData||b.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=r.value.length>0,[A]=N.filterProps(e),M=m||!o.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(N,F({ref:h},A,{modelValue:r.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":me,focused:o.value,"onUpdate:focused":u=>o.value=u,validationValue:r.externalValue,dirty:m,class:["v-select",{"v-select--active-menu":t.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:M,"onClick:clear":se,"onMousedown:control":ce,onBlur:de,onKeydown:re,"aria-label":c(d.value),title:c(d.value)}),{...l,default:()=>s(O,null,[s(He,F({ref:E,modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:fe},e.menuProps),{default:()=>[i&&s(Be,{ref:I,selected:R.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ie,onFocusin:ve,onScrollPassive:ue,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var u,V,v;return[(u=l["prepend-item"])==null?void 0:u.call(l),!b.value.length&&!e.hideNoData&&(((V=l["no-data"])==null?void 0:V.call(l))??s(G,{title:c(e.noDataText)},null)),s(Me,{renderless:!0,items:b.value},{default:P=>{var q;let{item:w,index:C,itemRef:pe}=P;const _=F(w.props,{ref:pe,key:C,onClick:()=>B(w)});return((q=l.item)==null?void 0:q.call(l,{item:w,index:C,props:_}))??s(G,_,{prepend:ye=>{let{isSelected:he}=ye;return s(O,null,[e.multiple&&!e.hideSelected?s(Ke,{key:w.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependIcon&&s(Y,{icon:w.props.prependIcon},null)])}})}}),(v=l["append-item"])==null?void 0:v.call(l)]}})]}),p.value.map((u,V)=>{var w;function v(C){C.stopPropagation(),C.preventDefault(),B(u)}const P={"onClick:close":v,onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:u.value,class:"v-select__selection"},[n?l.chip?s(ae,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>{var C;return[(C=l.chip)==null?void 0:C.call(l,{item:u,index:V,props:P})]}}):s(Oe,F({key:"chip",closable:e.closableChips,size:"small",text:u.title},P),null):((w=l.selection)==null?void 0:w.call(l,{item:u,index:V}))??s("span",{class:"v-select__selection-text"},[u.title,e.multiple&&V<p.value.length-1&&s("span",{class:"v-select__selection-comma"},[Ee(",")])])])})]),"append-inner":function(){var P;for(var u=arguments.length,V=new Array(u),v=0;v<u;v++)V[v]=arguments[v];return s(O,null,[(P=l["append-inner"])==null?void 0:P.call(l,...V),e.menuIcon?s(Y,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),oe({isFocused:o,menu:t,select:B},h)}});export{Ze as V};
