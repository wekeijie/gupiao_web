import{m as Pe,V as J}from"./VTextField-9d60ad29.js";import{p as z,c_ as oe,dn as Ce,dp as ue,i as ie,r as j,d3 as xe,am as Ae,d8 as Ee,q as S,A as M,bx as Se,dq as Q,ab as Y,bV as De,dr as Te,au as Ie,bO as Le,af as se,cZ as X,a5 as U,cY as H,a8 as L,x as re,ap as ee,y as f,aj as ce,d0 as de,ds as Re,dm as N,ag as Fe,d5 as Be,ac as Oe,Y as _,cP as Me,F as te,dt as Ke,G as Ue,du as ne,dv as le,dh as He}from"./index-402c45ae.js";import{d as qe}from"./VInput-10d013ca.js";import{m as $e,u as Ne,V as _e,a as ae}from"./VList-bb9d18c2.js";import{V as je}from"./VVirtualScroll-f4fb8fb4.js";import{V as ze}from"./VCheckboxBtn-849921d4.js";import{V as Ye}from"./VChip-b2dc74a4.js";const We=z({id:String,submenu:Boolean,...oe(Ce({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ue}}),["absolute"])},"VMenu"),Ge=ie()({name:"VMenu",props:We(),emits:{"update:modelValue":e=>!0},setup(e,O){let{slots:a}=O;const c=j(e,"modelValue"),{scopeId:w}=xe(),{isRtl:P}=Ae(),k=Ee(),i=S(()=>e.id||`v-menu-${k}`),l=M(),r=Se(Q,null),C=Y(new Set);De(Q,{register(){C.value.add(k)},unregister(){C.value.delete(k)},closeParents(n){setTimeout(()=>{var d;!C.value.size&&!e.persistent&&(n==null||(d=l.value)!=null&&d.contentEl&&!Te(n,l.value.contentEl))&&(c.value=!1,r==null||r.closeParents())},40)}}),Ie(()=>{r==null||r.unregister(),document.removeEventListener("focusin",D)}),Le(()=>c.value=!1);async function D(n){var g,m,T;const d=n.relatedTarget,v=n.target;await se(),c.value&&d!==v&&((g=l.value)!=null&&g.contentEl)&&((m=l.value)!=null&&m.globalTop)&&![document,l.value.contentEl].includes(v)&&!l.value.contentEl.contains(v)&&((T=X(l.value.contentEl)[0])==null||T.focus())}U(c,n=>{n?(r==null||r.register(),H&&document.addEventListener("focusin",D,{once:!0})):(r==null||r.unregister(),H&&document.removeEventListener("focusin",D))},{immediate:!0});function u(n){r==null||r.closeParents(n)}function x(n){var d,v,g,m,T;if(!e.disabled)if(n.key==="Tab"||n.key==="Enter"&&!e.closeOnContentClick){if(n.key==="Enter"&&(n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLInputElement&&n.target.closest("form")))return;n.key==="Enter"&&n.preventDefault(),Re(X((d=l.value)==null?void 0:d.contentEl,!1),n.shiftKey?"prev":"next",R=>R.tabIndex>=0)||(c.value=!1,(g=(v=l.value)==null?void 0:v.activatorEl)==null||g.focus())}else e.submenu&&n.key===(P.value?"ArrowRight":"ArrowLeft")&&(c.value=!1,(T=(m=l.value)==null?void 0:m.activatorEl)==null||T.focus())}function A(n){var v;if(e.disabled)return;const d=(v=l.value)==null?void 0:v.contentEl;d&&c.value?n.key==="ArrowDown"?(n.preventDefault(),n.stopImmediatePropagation(),N(d,"next")):n.key==="ArrowUp"?(n.preventDefault(),n.stopImmediatePropagation(),N(d,"prev")):e.submenu&&(n.key===(P.value?"ArrowRight":"ArrowLeft")?c.value=!1:n.key===(P.value?"ArrowLeft":"ArrowRight")&&(n.preventDefault(),N(d,"first"))):(e.submenu?n.key===(P.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(n.key))&&(c.value=!0,n.preventDefault(),setTimeout(()=>setTimeout(()=>A(n))))}const q=S(()=>L({"aria-haspopup":"menu","aria-expanded":String(c.value),"aria-owns":i.value,onKeydown:A},e.activatorProps));return re(()=>{const n=ee.filterProps(e);return f(ee,L({ref:l,id:i.value,class:["v-menu",e.class],style:e.style},n,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,absolute:!0,activatorProps:q.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":u,onKeydown:x},w),{activator:a.activator,default:function(){for(var d=arguments.length,v=new Array(d),g=0;g<d;g++)v[g]=arguments[g];return f(ce,{root:"VMenu"},{default:()=>{var m;return[(m=a.default)==null?void 0:m.call(a,...v)]}})}})}),de({id:i,ΨopenChildren:C},l)}});function Ze(e,O){const a=Y(!1);let c;function w(i){cancelAnimationFrame(c),a.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{a.value=!1})})}async function P(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(a.value){const l=U(a,()=>{l(),i()})}else i()})}async function k(i){var C,D;if(i.key==="Tab"&&((C=O.value)==null||C.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const l=(D=e.value)==null?void 0:D.$el;if(!l)return;(i.key==="Home"||i.key==="End")&&l.scrollTo({top:i.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await P();const r=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const u=l.getBoundingClientRect().top;for(const x of r)if(x.getBoundingClientRect().top>=u){x.focus();break}}else{const u=l.getBoundingClientRect().bottom;for(const x of[...r].reverse())if(x.getBoundingClientRect().bottom<=u){x.focus();break}}}return{onScrollPassive:w,onKeydown:k}}const Je=z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Fe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...$e({itemChildren:!1})},"Select"),Qe=z({...Je(),...oe(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Be({transition:{component:ue}})},"VSelect"),ut=ie()({name:"VSelect",props:Qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,O){let{slots:a}=O;const{t:c}=Oe(),w=M(),P=M(),k=M(),i=j(e,"menu"),l=S({get:()=>i.value,set:t=>{var o;i.value&&!t&&((o=P.value)!=null&&o.ΨopenChildren.size)||(i.value=t)}}),{items:r,transformIn:C,transformOut:D}=Ne(e),u=j(e,"modelValue",[],t=>C(t===null?[null]:He(t)),t=>{const o=D(t);return e.multiple?o:o[0]??null}),x=S(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),A=qe(),q=S(()=>u.value.map(t=>t.value)),n=Y(!1),d=S(()=>l.value?e.closeText:e.openText);let v="",g;const m=S(()=>e.hideSelected?r.value.filter(t=>!u.value.some(o=>e.valueComparator(o,t))):r.value),T=S(()=>e.hideNoData&&!m.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),$=S(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=M(),fe=Ze(R,w);function ve(t){e.openOnClear&&(l.value=!0)}function me(){T.value||(l.value=!l.value)}function pe(t){ne(t)&&W(t)}function W(t){var E,s;if(!t.key||e.readonly||A!=null&&A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?(E=R.value)==null||E.focus("first"):t.key==="End"&&((s=R.value)==null||s.focus("last"));const o=1e3;if(e.multiple||!ne(t))return;const p=performance.now();p-g>o&&(v=""),v+=t.key.toLowerCase(),g=p;const I=r.value.find(y=>y.title.toLowerCase().startsWith(v));if(I!==void 0){u.value=[I];const y=m.value.indexOf(I);H&&window.requestAnimationFrame(()=>{var h;y>=0&&((h=k.value)==null||h.scrollToIndex(y))})}}function K(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const p=u.value.findIndex(E=>e.valueComparator(E.value,t.value)),I=o??!~p;if(~p){const E=I?[...u.value,t]:[...u.value];E.splice(p,1),u.value=E}else I&&(u.value=[...u.value,t])}else{const p=o!==!1;u.value=p?[t]:[],se(()=>{l.value=!1})}}function ye(t){var o;(o=R.value)!=null&&o.$el.contains(t.relatedTarget)||(l.value=!1)}function ge(){var t;e.eager&&((t=k.value)==null||t.calculateVisibleItems())}function he(){var t;n.value&&((t=w.value)==null||t.focus())}function Ve(t){n.value=!0}function we(t){if(t==null)u.value=[];else if(le(w.value,":autofill")||le(w.value,":-webkit-autofill")){const o=r.value.find(p=>p.title===t);o&&K(o)}else w.value&&(w.value.value="")}return U(l,()=>{if(!e.hideSelected&&l.value&&u.value.length){const t=m.value.findIndex(o=>u.value.some(p=>e.valueComparator(p.value,o.value)));H&&window.requestAnimationFrame(()=>{var o;t>=0&&((o=k.value)==null||o.scrollToIndex(t))})}}),U(()=>e.items,(t,o)=>{l.value||n.value&&!o.length&&t.length&&(l.value=!0)}),re(()=>{const t=!!(e.chips||a.chip),o=!!(!e.hideNoData||m.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),p=u.value.length>0,I=J.filterProps(e),E=p||!n.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(J,L({ref:w},I,{modelValue:u.value.map(s=>s.props.value).join(", "),"onUpdate:modelValue":we,focused:n.value,"onUpdate:focused":s=>n.value=s,validationValue:u.externalValue,counterValue:x.value,dirty:p,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:E,"onClick:clear":ve,"onMousedown:control":me,onBlur:ye,onKeydown:W,"aria-label":c(d.value),title:c(d.value)}),{...a,default:()=>f(_,null,[f(Ge,L({ref:P,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ge,onAfterLeave:he},$.value),{default:()=>[o&&f(_e,L({ref:R,selected:q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:pe,onFocusin:Ve,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},fe,e.listProps),{default:()=>{var s,y,h;return[(s=a["prepend-item"])==null?void 0:s.call(a),!m.value.length&&!e.hideNoData&&(((y=a["no-data"])==null?void 0:y.call(a))??f(ae,{title:c(e.noDataText)},null)),f(je,{ref:k,renderless:!0,items:m.value},{default:F=>{var Z;let{item:b,index:B,itemRef:V}=F;const G=L(b.props,{ref:V,key:B,onClick:()=>K(b,null)});return((Z=a.item)==null?void 0:Z.call(a,{item:b,index:B,props:G}))??f(ae,L(G,{role:"option"}),{prepend:be=>{let{isSelected:ke}=be;return f(_,null,[e.multiple&&!e.hideSelected?f(ze,{key:b.value,modelValue:ke,ripple:!1,tabindex:"-1"},null):void 0,b.props.prependAvatar&&f(Me,{image:b.props.prependAvatar},null),b.props.prependIcon&&f(te,{icon:b.props.prependIcon},null)])}})}}),(h=a["append-item"])==null?void 0:h.call(a)]}})]}),u.value.map((s,y)=>{function h(V){V.stopPropagation(),V.preventDefault(),K(s,!1)}const F={"onClick:close":h,onKeydown(V){V.key!=="Enter"&&V.key!==" "||(V.preventDefault(),V.stopPropagation(),h(V))},onMousedown(V){V.preventDefault(),V.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},b=t?!!a.chip:!!a.selection,B=b?Ke(t?a.chip({item:s,index:y,props:F}):a.selection({item:s,index:y})):void 0;if(!(b&&!B))return f("div",{key:s.value,class:"v-select__selection"},[t?a.chip?f(ce,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>[B]}):f(Ye,L({key:"chip",closable:e.closableChips,size:"small",text:s.title,disabled:s.props.disabled},F),null):B??f("span",{class:"v-select__selection-text"},[s.title,e.multiple&&y<u.value.length-1&&f("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var F;for(var s=arguments.length,y=new Array(s),h=0;h<s;h++)y[h]=arguments[h];return f(_,null,[(F=a["append-inner"])==null?void 0:F.call(a,...y),e.menuIcon?f(te,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),de({isFocused:n,menu:l,select:K},w)}});export{ut as V};
