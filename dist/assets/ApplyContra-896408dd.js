import{M as z,z as _,ab as H,N as M,O as u,A as v,P as V,x as t,C as e,I as n,D as k,Q as x,R as P,S as C,F as a,E as S,ag as R,ck as F,X as c,U as A,B,ac as G,Y as O,W as Q,Z as W,_ as X,G as Y,H as Z}from"./index-c22933ce.js";import{P as j}from"./topWrap-2bab91b8.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f}from"./VRow-9bcf32ab.js";import{V as D}from"./VSheet-47f22203.js";import{V as l}from"./VCol-0ed2e8ae.js";import{V as J}from"./VDivider-279b5162.js";import{a as K,c as tt,V as et}from"./VList-a22e6b6e.js";import{V as at}from"./VBottomSheet-c2092fab.js";/* empty css                                                                */import"./index-3f6188e2.js";import"./ssrBoot-9105c513.js";const E=h=>(Y("data-v-d158669a"),h=h(),Z(),h),lt={class:"bg-color ui-min-height"},st={class:"topup-bg"},ot={class:"px-3 pt-10"},ct={class:"px-3 mt-n16"},dt={class:"text-red"},ut=E(()=>n("div",{class:"text-body-1 mb-3"},"请选择申请额度",-1)),it={class:"text-h6"},nt={class:"text-body-2"},rt=E(()=>n("span",{class:"text-h6"},"合约详情",-1)),pt={__name:"ApplyContra",setup(h){const T=z();_();const g=_(!1),m=_({title:"",day:""}),p=_({}),w=_(0),i=_(500),y=_(!1),o=H({total:0,expand:0,loss_waring:0,loss_fail:0,rate:0});M(()=>{u.dispatch("user/userInfo"),u.dispatch("contract/getType").then(()=>{I(u.state.contract.typeList[0])})});const N=()=>{const r={amount:i.value,type_id:m.value.id,limit_id:p.value.id};u.dispatch("contract/create",r).then(()=>{u.dispatch("snackbar/success",{active:!0,body:"申请成功！"}),y.value=!1,T.push("/contract")})},I=r=>{m.value=r,U(r.id),g.value=!1},U=r=>{u.dispatch("contract/getLimit",r).then(()=>{L(0)})},L=(r,d)=>{w.value=d,p.value=r},$=()=>{if(i.value>u.state.user.info.balance){u.dispatch("snackbar/warning",{active:!0,body:"保证金不足，请存款！"});return}console.log(p),o.expand=i.value*p.value.limit,o.total=o.expand+i.value,o.loss_waring=o.expand+i.value*.5,o.loss_fail=o.expand+i.value*.2,o.rate=o.expand*(p.value.rate/100),y.value=!0};return(r,d)=>(v(),V(C,null,[t(j,null,{headerCenter:e(()=>[a("申请合约")]),_:1}),n("div",lt,[n("div",st,[n("div",ot,[t(f,{class:"ma-0 pa-0 border-bottom-line"},{default:e(()=>[t(l,{class:"px-0",cols:"1"},{default:e(()=>[t(S,{color:"white"},{default:e(()=>[a("mdi-currency-cny")]),_:1})]),_:1}),t(l,{cols:"11"},{default:e(()=>[R(n("input",{type:"number",class:"amount",placeholder:"请输入保证金金额","onUpdate:modelValue":d[0]||(d[0]=s=>i.value=s)},null,512),[[F,i.value]])]),_:1})]),_:1})])]),n("div",ct,[t(D,{class:"bg-white rounded-lg py-3"},{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("钱包可用余额")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right"},{default:e(()=>[a("¥"+c(x(u).state.user.info.balance),1)]),_:1})]),_:1}),t(J),t(f,{class:"ma-0 pa-0 mt-2"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("合约类型")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right",onClick:d[1]||(d[1]=s=>g.value=!0)},{default:e(()=>[n("span",dt,c(m.value.title+"-操盘"+m.value.day+"天"),1),t(S,{size:"large",color:"#8E8E8E"},{default:e(()=>[a("mdi-chevron-right")]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"bg-white rounded-lg py-3 mt-3 px-3"},{default:e(()=>[ut,t(f,{class:"ma-0 pa-0"},{default:e(()=>[(v(!0),V(C,null,A(x(u).state.contract.limitList,(s,b)=>(v(),B(l,{cols:"3",class:G(["text-center list-bg border-line rounded-lg mr-7 mb-3",{"active-style":w.value==b}]),key:s.title,onClick:_t=>L(s,b)},{default:e(()=>[n("div",it,c(s.title),1),n("div",nt,c(s.limit*i.value),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])]),t(k,{block:"",color:"#445CED",class:"text-white rounded-0 py-7 text-h6 fixed",style:{bottom:"0px"},onClick:$},{default:e(()=>[a("立即申请")]),_:1}),t(x(at),{modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=s=>g.value=s)},{default:e(()=>[t(K,null,{default:e(()=>[t(tt,{class:"w-100"},{default:e(()=>[a(" 选择合约类型 ")]),_:1}),(v(!0),V(C,null,A(x(u).state.contract.typeList,s=>(v(),B(et,{key:s.title,title:s.title+s.day+"天",onClick:b=>I(s)},null,8,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(P,{modelValue:y.value,"onUpdate:modelValue":d[4]||(d[4]=s=>y.value=s),persistent:"",width:"1024"},{default:e(()=>[t(O,null,{default:e(()=>[t(Q,null,{default:e(()=>[rt]),_:1}),t(W,null,{default:e(()=>[t(f,{class:"mx-0 pa-0 text-body-1 text-grey-darken-1"},{default:e(()=>[t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("总操盘资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.total),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("保证金/本金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(i.value),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("配资资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand)+"/"+c(p.value.limit),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损预警线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_waring),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损平仓线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_fail),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("利率")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(p.value.rate+"%"),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("产生利息")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.rate)+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("资金使用时间")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(m.value.day)+"天后自动续期",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("可用利息券")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(x(u).state.user.info.interest_amount)+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("准备资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand),1)]),_:1})]),_:1})]),_:1}),t(X,null,{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:d[3]||(d[3]=s=>y.value=!1)},{default:e(()=>[a(" 取消 ")]),_:1})]),_:1}),t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:N},{default:e(()=>[a(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},It=q(pt,[["__scopeId","data-v-d158669a"]]);export{It as default};
