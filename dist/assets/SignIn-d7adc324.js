import{_ as O}from"./myCenter-f106fed0.js";import{u as M,a as j,p as A}from"./vaildRule-0c11381e.js";import{N as G,p as H,a5 as Q,a as J,b as K,a9 as W,c as X,aq as Y,ar as Z,d as ee,f as ae,h as te,as as se,i as le,at as oe,q as C,a3 as ne,au as re,l as ie,aa as de,n as ue,av as ce,aw as me,o as ve,ax as pe,t as be,ay as fe,x as t,az as ye,E as ge,a8 as B,D as k,aA as ke,L as Ve,z as b,ac as _e,O as he,ap as we,A as L,Q as xe,I as i,C as d,B as Ce,af as Se,F as f,P as n,R as g,G as Pe,H as Ie}from"./index-169a54b9.js";import{_ as Ae}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Be}from"./VForm-dcf40aa3.js";import{V as v}from"./VTextField-7dd5245b.js";import{V as Le}from"./VRow-6ac030e3.js";import{V as R}from"./VCol-a4b320f8.js";import"./VInput-b8b68d17.js";import"./index-6ef6fb0a.js";const Re=G("v-alert-title"),Te=["success","info","warning","error"],$e=H({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Q,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Te.includes(e)},...J(),...K(),...W(),...X(),...Y(),...Z(),...ee(),...ae(),...te(),...se({variant:"flat"})},"VAlert"),qe=le()({name:"VAlert",props:$e(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,V){let{emit:a,slots:s}=V;const u=oe(e,"modelValue"),c=C(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),y=C(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:_}=ne(e),{colorClasses:h,colorStyles:w,variantClasses:m}=re(y),{densityClasses:r}=ie(e),{dimensionStyles:l}=de(e),{elevationClasses:o}=ue(e),{locationStyles:$}=ce(e),{positionClasses:q}=me(e),{roundedClasses:z}=ve(e),{textColorClasses:D,textColorStyles:F}=pe(be(e,"borderColor")),{t:N}=fe(),S=C(()=>({"aria-label":N(e.closeLabel),onClick(x){u.value=!1,a("click:close",x)}}));return()=>{const x=!!(s.prepend||c.value),U=!!(s.title||e.title),E=!!(s.close||e.closable);return u.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},_.value,h.value,r.value,o.value,q.value,z.value,m.value,e.class],style:[w.value,l.value,$.value,e.style],role:"alert"},{default:()=>{var P,I;return[ye(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",D.value],style:F.value},null),x&&t("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?t(B,{key:"prepend-defaults",disabled:!c.value,defaults:{VIcon:{density:e.density,icon:c.value,size:e.prominent?44:28}}},s.prepend):t(ge,{key:"prepend-icon",density:e.density,icon:c.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[U&&t(Re,{key:"title"},{default:()=>{var p;return[((p=s.title)==null?void 0:p.call(s))??e.title]}}),((P=s.text)==null?void 0:P.call(s))??e.text,(I=s.default)==null?void 0:I.call(s)]),s.append&&t("div",{key:"append",class:"v-alert__append"},[s.append()]),E&&t("div",{key:"close",class:"v-alert__close"},[s.close?t(B,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var p;return[(p=s.close)==null?void 0:p.call(s,{props:S.value})]}}):t(k,ke({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},S.value),null)])]}})}}}),T=e=>(Pe("data-v-3b229a88"),e=e(),Ie(),e),ze={class:"login-box"},De=T(()=>i("h1",null,"注册",-1)),Fe=T(()=>i("div",{class:"log-top"},[i("img",{src:O})],-1)),Ne={class:"login-cont"},Ue={class:"flexEnd inlin-customer"},Ee={class:"sign-in-box"},Oe={__name:"SignIn",setup(e){const V=Ve();b("password");const a=_e({username:"",phone:"",code:"",password:"",passwordAgo:"",recom:""}),s=b(null),u=b(!1),c=()=>{u.value=!0;let r=60;s.value=window.setInterval(()=>{r==0?y():r--},1e3)},y=()=>{clearInterval(s.value),u.value=!1},_=()=>{if(a.phone.length<6||a.phone.length>11){n.dispatch("snackbar/warning",{active:!0,body:"请输入正确的手机号码"});return}c(),n.dispatch("user/sendSms",a.phone).then(r=>{n.dispatch("snackbar/success",{active:!0,body:"发送成功"})}).catch(()=>{y()})},h=async()=>{if(a.password.length<6){n.dispatch("snackbar/warning",{active:!0,body:"密码长度不能小于6位"});return}if(a.password!=a.passwordAgo){n.dispatch("snackbar/warning",{active:!0,body:"两次密码不一致"});return}if(a.code.length!=4){n.dispatch("snackbar/warning",{active:!0,body:"请输入正确的验证码"});return}if(a.username.length<3){n.dispatch("snackbar/warning",{active:!0,body:"账号长度不能小于3位"});return}if(a.phone.length<11){n.dispatch("snackbar/warning",{active:!0,body:"请输入正确的手机号码"});return}n.dispatch("user/register",{user_name:a.username,mobile:a.phone,password:a.password,verify_code:a.code,referrer:a.recom}).then(r=>{n.dispatch("snackbar/success",{active:!0,body:"注册成功！"}),m("Login")})};b();const w=b(0);he(()=>{we()});const m=r=>{V.push(r)};return(r,l)=>(L(),xe("div",ze,[De,Fe,i("div",Ne,[t(Be,{ref:"form"},{default:d(()=>[t(v,{variant:"underlined",modelValue:a.username,"onUpdate:modelValue":l[0]||(l[0]=o=>a.username=o),required:"",counter:12,clearable:"",label:"账号","hide-details":"auto",rules:g(M)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.phone,"onUpdate:modelValue":l[1]||(l[1]=o=>a.phone=o),required:"",counter:12,clearable:"",active:"",label:"手机号","hide-details":"auto",rules:g(j)},null,8,["modelValue","rules"]),t(Le,{class:"ma-0 pa-0"},{default:d(()=>[t(R,{cols:"8",class:"pa-0"},{default:d(()=>[t(v,{variant:"underlined",modelValue:a.code,"onUpdate:modelValue":l[2]||(l[2]=o=>a.code=o),required:"",counter:4,label:"验证码",type:"Number"},null,8,["modelValue"])]),_:1}),t(R,{cols:"4",class:"px-1"},{default:d(()=>[t(k,{class:"text-none",color:"success",rounded:"",block:"",variant:"outlined",onClick:_,disabled:u.value},{default:d(()=>[f(" 发送 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(v,{variant:"underlined",modelValue:a.password,"onUpdate:modelValue":l[3]||(l[3]=o=>a.password=o),required:"",label:"密码",type:"password",rules:g(A)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.passwordAgo,"onUpdate:modelValue":l[4]||(l[4]=o=>a.passwordAgo=o),required:"",label:"确认密码",type:"password",rules:g(A)},null,8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:a.recom,"onUpdate:modelValue":l[5]||(l[5]=o=>a.recom=o),required:"",counter:12,label:"推荐人"},null,8,["modelValue"]),i("div",Ue,[i("p",null,[f(" 提示收不到验证码时请联系 "),i("span",{onClick:l[6]||(l[6]=o=>m("/ForgertPhone"))},"在线客服")])])]),_:1},512),w.value>55?(L(),Ce(qe,{key:0,text:"发送成功"})):Se("",!0),t(k,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:h},{default:d(()=>[f(" 注册 ")]),_:1}),t(k,{color:"rgb(0, 191, 255)",class:"mt-4",size:"x-large",block:"",onClick:l[7]||(l[7]=o=>m("/"))},{default:d(()=>[f(" 返回 ")]),_:1}),i("div",Ee,[f(" 已有账号?"),i("span",{onClick:l[8]||(l[8]=o=>m("/Login"))},"马上登陆")])])]))}},Ze=Ae(Oe,[["__scopeId","data-v-3b229a88"]]);export{Ze as default};
