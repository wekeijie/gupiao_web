import{P}from"./topWrap-7c54d6f8.js";import{P as N,Q as q,A as g,R as O,S as n,au as D,a5 as R,B as o,T as a,y as C,D as F,J as t,Z as e,W as u,$ as p,G as T,Y as y,_ as b,a1 as h,H as j,I as z}from"./index-94436294.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as H,a as M}from"./VCarouselItem-e372b3cb.js";/* empty css                                                                */import"./VWindowItem-9e3239f1.js";import"./ssrBoot-c2e801da.js";const i=k=>(j("data-v-10fbc2eb"),k=k(),z(),k),U=i(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"5px"}},null,-1)),Y={class:"pact-title"},G={class:"flexAroud amount-cont-box"},J={class:"amount-list"},Q=i(()=>t("p",null,"操盘资金",-1)),W={class:"amount-list"},Z=i(()=>t("p",null,"配资金额",-1)),K={class:"amount-list"},X=i(()=>t("p",null,"触发警戒",-1)),tt={class:"amount-list"},st=i(()=>t("p",null,"触发止损",-1)),et={class:"amount-list"},lt=i(()=>t("p",null,"可用余额",-1)),ot={class:"amount-list"},at=i(()=>t("p",null,"冻结资金",-1)),nt={class:"amount-list"},ct=i(()=>t("p",null,"证券市值",-1)),rt={class:"amount-list"},it=i(()=>t("p",null,"合约市值",-1)),dt={class:"amount-list"},ut=i(()=>t("p",null,"扩大配资",-1)),_t={class:"amount-list"},ht=i(()=>t("p",null,"追保金额",-1)),pt={class:"amount-list"},vt=i(()=>t("p",null,"提盈金额",-1)),gt={class:"amount-list"},yt=i(()=>t("p",null,"合约盈亏",-1)),bt=i(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"5px"}},null,-1)),xt={class:"head-bottom"},mt={class:"table-box flexStart"},kt={class:"coupon-box"},ft={key:0,class:"new-box"},wt=i(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称"),t("th",{style:{"text-align":"right"}},"现价/成本"),t("th",{style:{"text-align":"right"}},"盈亏"),t("th",{style:{"text-align":"right"}},"持仓"),t("th",{style:{"text-align":"right"}},"市值")],-1)),Ct={class:"tr-one"},Ft={class:"tr-two"},Vt={class:"tr-two-number"},$t={class:"tr-two-number"},It={class:"tr-three",style:{"text-align":"right"}},Dt={class:"tr-three",style:{"text-align":"right"}},Lt={key:1,class:"new-box"},St={class:"head-bottom"},At={class:"table-box flexStart"},Bt={key:0,class:""},Pt=i(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"ID"),t("th",{style:{}},"扩大金额"),t("th",{style:{"text-align":"right"}},"操作时间")],-1)),Nt={class:"tr-one"},qt={class:"tr-two"},Ot={class:"tr-two-number"},Rt={class:"tr-three",style:{"text-align":"right"}},Tt={class:"tr-two-number"},jt={key:1,class:""},zt=i(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"ID"),t("th",{style:{}},"追加金额"),t("th",{style:{"text-align":"right"}},"操作时间")],-1)),Et={class:"tr-one"},Ht={class:"tr-two"},Mt={class:"tr-two-number"},Ut={class:"tr-three",style:{"text-align":"right"}},Yt={class:"tr-two-number"},Gt={key:2,class:"new-box"},Jt=i(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称"),t("th",{style:{"text-align":"right"}},"价格/类型"),t("th",{style:{"text-align":"right"}},"数量"),t("th",{style:{"text-align":"right"}},"成交时间")],-1)),Qt=["onClick"],Wt={class:"tr-one"},Zt={class:"tr-two"},Kt={key:0,class:"tr-two-number"},Xt={key:1,class:"tr-two-number"},ts={class:"tr-two-number"},ss={class:"tr-three",style:{"text-align":"right"}},es={class:"tr-two-number"},ls={class:"tr-three",style:{"text-align":"right"}},os={key:3,class:"new-box"},as=i(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称/代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量/类型"),t("th",{style:{"text-align":"right"}},"状态")],-1)),ns={class:"tr-one"},cs={class:"tr-two"},rs={key:0,class:"tr-two-number text-right"},is={key:1,class:"tr-two-number text-right"},ds={class:"tr-three",style:{"text-align":"right"}},us={class:"tr-two-number"},_s={class:"tr-three",style:{"text-align":"right"}},hs={key:0},ps={key:1},vs={__name:"PactDetail",setup(k){const L=N(),V=q(),_=g(0),v=g(0),x=g(0),f=g(0),$=g(0),I=g([]);O(()=>{V.query.code&&(x.value=V.query.code),n.dispatch("contract/getDetail",x.value).then(d=>{let r=d.stock.reduce((c,l)=>c+=parseFloat(l.sell)*l.number,0);$.value=parseFloat(r.toFixed(2)),I.value=A(d.stock)})});const S=d=>(d.reduce((c,l)=>c+parseFloat(l),0)/d.length).toFixed(2),A=d=>{const r=d.reduce((c,l)=>{let s=parseFloat(D(l.price,l.sell,l.number)),m=parseFloat(l.sell)*l.number;return c[l.code]?(c[l.code].amount+=s,c[l.code].number+=l.number,c[l.code].capit+=m,c[l.code].cost.push(l.price)):c[l.code]={...l,amount:s,cost:[l.price],capit:m},c},{});return Object.values(r)};R(()=>n.state.contract.staock_list,(d,r)=>{let c=0;d.length>0&&d.forEach(s=>{let m=D(s.price,s.sell,s.number);c+=parseFloat(m)});let l=parseFloat(c)+parseFloat(n.state.contract.detail.unrealized);f.value=parseFloat(l.toFixed(2))});const B=d=>{L.push({path:"/market/detail",query:{order_id:d}})},w=d=>{d==1?n.dispatch("contract/getAmountList",x.value):d==2?n.dispatch("contract/getAllList",x.value):d==3&&n.dispatch("contract/getOrderList",x.value),_.value=d};return(d,r)=>(o(),a("div",null,[C(P,null,{headerCenter:F(()=>[T("合约详情")]),_:1}),U,t("div",Y,[t("p",null,e(u(n).state.contract.detail.title),1),t("p",null,"["+e(u(n).state.contract.detail.order_id)+"]",1)]),t("div",G,[t("div",J,[t("span",null,e(u(n).state.contract.detail.total_amount),1),Q]),t("div",W,[t("span",null,e(u(n).state.contract.detail.expand_amount),1),Z]),t("div",K,[t("span",null,e(u(n).state.contract.detail.caution_line),1),X]),t("div",tt,[t("span",null,e(u(n).state.contract.detail.stop_loss),1),st]),t("div",et,[t("span",null,e(u(n).state.contract.detail.balance),1),lt]),t("div",ot,[t("span",null,e(u(n).state.contract.detail.fee),1),at]),t("div",nt,[t("span",null,e($.value),1),ct]),t("div",rt,[t("span",null,e(parseFloat(u(n).state.contract.detail.total_amount)+f.value),1),it]),t("div",dt,[t("span",null,e(u(n).state.contract.detail.expend_total),1),ut]),t("div",_t,[t("span",null,e(u(n).state.contract.detail.append_total),1),ht]),t("div",pt,[t("span",null,e(u(n).state.contract.detail.withdraw),1),vt]),t("div",gt,[t("span",null,e(f.value),1),yt])]),bt,t("div",xt,[t("div",mt,[t("p",{class:p(_.value==0?"active-tab":""),onClick:r[0]||(r[0]=c=>_.value=0)}," 合约持仓 ",2),t("p",{class:p(_.value==1?"active-tab":""),onClick:r[1]||(r[1]=c=>w(1))}," 资金明细 ",2),t("p",{class:p(_.value==2?"active-tab":""),onClick:r[2]||(r[2]=c=>w(2))}," 成交明细 ",2),t("p",{class:p(_.value==3?"active-tab":""),onClick:r[3]||(r[3]=c=>w(3))}," 我的委托 ",2)])]),t("div",kt,[C(H,{"show-arrows":!1,"hide-delimiters":"",modelValue:_.value,"onUpdate:modelValue":r[6]||(r[6]=c=>_.value=c),height:"auto"},{default:F(()=>[(o(),a(y,null,b(4,(c,l)=>C(M,{key:l},{default:F(()=>[l==0?(o(),a("div",ft,[t("table",null,[t("tbody",null,[wt,(o(!0),a(y,null,b(I.value,s=>(o(),a("tr",{class:"tr-list",key:s.code},[t("td",Ct,[t("h4",null,e(s.title),1)]),t("td",Ft,[t("div",Vt,e(s.sell)+"/"+e(S(s.cost)),1)]),t("td",{class:p(["tr-three",[s.amount>0?"text-red":"text-green"]]),style:{"text-align":"right"}},[t("div",$t,e(s.amount),1)],2),t("td",It,e(s.number),1),t("td",Dt,e(s.capit.toFixed(2)),1)]))),128))])])])):h("",!0),l==1?(o(),a("div",Lt,[t("div",St,[t("div",At,[t("p",{class:p(v.value==0?"active-tab":""),onClick:r[4]||(r[4]=s=>v.value=0)}," 扩大配资 ",2),t("p",{class:p(v.value==1?"active-tab":""),onClick:r[5]||(r[5]=s=>v.value=1)}," 增加保证金 ",2)])]),v.value==0?(o(),a("div",Bt,[t("table",null,[t("tbody",null,[Pt,(o(!0),a(y,null,b(u(n).state.contract.amountList.expend,s=>(o(),a("tr",{class:"tr-list",key:s.id},[t("td",Nt,[t("h4",null,e(s.id),1)]),t("td",qt,[t("div",Ot,e(s.amount),1)]),t("td",Rt,[t("div",Tt,e(s.date),1)])]))),128))])])])):h("",!0),v.value==1?(o(),a("div",jt,[t("table",null,[t("tbody",null,[zt,(o(!0),a(y,null,b(u(n).state.contract.amountList.append,s=>(o(),a("tr",{class:"tr-list",key:s.id},[t("td",Et,[t("h4",null,e(s.id),1)]),t("td",Ht,[t("div",Mt,e(s.amount),1)]),t("td",Ut,[t("div",Yt,e(s.date),1)])]))),128))])])])):h("",!0)])):h("",!0),l==2?(o(),a("div",Gt,[t("table",null,[t("tbody",null,[Jt,(o(!0),a(y,null,b(u(n).state.contract.allList,s=>(o(),a("tr",{class:"tr-list",key:s.code,onClick:m=>B(s.id)},[t("td",Wt,[t("h4",null,e(s.title),1)]),t("td",Zt,[s.type=="BUY"?(o(),a("div",Kt,e(s.buy_price),1)):(o(),a("div",Xt,e(s.sell_price),1)),t("span",ts,e(s.type_string),1)]),t("td",ss,[t("div",es,e(s.number),1)]),t("td",ls,[t("p",null,e(s.date),1)])],8,Qt))),128))])])])):h("",!0),l==3?(o(),a("div",os,[t("table",null,[t("tbody",null,[as,(o(!0),a(y,null,b(u(n).state.contract.orderList,s=>(o(),a("tr",{class:"tr-list",key:s.code},[t("td",ns,[t("h4",null,e(s.title),1),t("p",null,e(s.code),1)]),t("td",cs,[s.type=="买入"?(o(),a("div",rs,e(s.buy_price),1)):h("",!0),s.type=="卖出"?(o(),a("div",is,e(s.sell_price),1)):h("",!0)]),t("td",ds,[t("div",us,e(s.number)+"/"+e(s.type),1)]),t("td",_s,[s.status==1?(o(),a("p",hs,"成交")):(o(),a("p",ps,"等待"))])]))),128))])])])):h("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"])])]))}},ws=E(vs,[["__scopeId","data-v-10fbc2eb"]]);export{ws as default};
