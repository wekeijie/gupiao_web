import{m as ge,V as N}from"./VTextField-4420525d.js";import{p as H,c_ as Z,d5 as we,d6 as ee,i as te,ar as U,d7 as Ve,cJ as be,q as S,z as M,bk as ke,d8 as j,ab as $,bL as Ce,a1 as ne,ay as I,w as le,ag as z,x as s,a8 as ae,cR as oe,bw as Pe,d3 as Y,d9 as xe,da as J,a5 as Se,cx as De,cF as Te,aw as Ee,T as O,E as W,F as Ae,db as G,dc as Q,cY as Fe}from"./index-bcd937ec.js";import{d as Ie}from"./VInput-c1ff8182.js";import{m as Le,u as Re,a as Be,V as X}from"./VList-18e34627.js";import{V as Ke}from"./VVirtualScroll-0f48f9fc.js";import{V as Me}from"./VCheckboxBtn-f2196a09.js";import{V as Oe}from"./VChip-a9f37a56.js";const Ue=H({id:String,...Z(we({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ee}}),["absolute"])},"VMenu"),He=te()({name:"VMenu",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,L){let{slots:l}=L;const c=U(e,"modelValue"),{scopeId:h}=Ve(),A=be(),x=S(()=>e.id||`v-menu-${A}`),t=M(),a=ke(j,null),C=$(0);Ce(j,{register(){++C.value},unregister(){--C.value},closeParents(){setTimeout(()=>{C.value||(c.value=!1,a==null||a.closeParents())},40)}});async function D(o){var y,k,T;const d=o.relatedTarget,f=o.target;await Pe(),c.value&&d!==f&&((y=t.value)!=null&&y.contentEl)&&((k=t.value)!=null&&k.globalTop)&&![document,t.value.contentEl].includes(f)&&!t.value.contentEl.contains(f)&&((T=Y(t.value.contentEl)[0])==null||T.focus())}ne(c,o=>{o?(a==null||a.register(),document.addEventListener("focusin",D,{once:!0})):(a==null||a.unregister(),document.removeEventListener("focusin",D))});function r(){a==null||a.closeParents()}function g(o){var d,f,y;e.disabled||o.key==="Tab"&&(xe(Y((d=t.value)==null?void 0:d.contentEl,!1),o.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(c.value=!1,(y=(f=t.value)==null?void 0:f.activatorEl)==null||y.focus()))}function p(o){var f;if(e.disabled)return;const d=(f=t.value)==null?void 0:f.contentEl;d&&c.value?o.key==="ArrowDown"?(o.preventDefault(),J(d,"next")):o.key==="ArrowUp"&&(o.preventDefault(),J(d,"prev")):["ArrowDown","ArrowUp"].includes(o.key)&&(c.value=!0,o.preventDefault(),setTimeout(()=>setTimeout(()=>p(o))))}const R=S(()=>I({"aria-haspopup":"menu","aria-expanded":String(c.value),"aria-owns":x.value,onKeydown:p},e.activatorProps));return le(()=>{const[o]=z.filterProps(e);return s(z,I({ref:t,class:["v-menu",e.class],style:e.style},o,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,absolute:!0,activatorProps:R.value,"onClick:outside":r,onKeydown:g},h),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return s(ae,{root:"VMenu"},{default:()=>{var k;return[(k=l.default)==null?void 0:k.call(l,...f)]}})}})}),oe({id:x,ΨopenChildren:C},t)}});function $e(e,L){const l=$(!1);let c;function h(t){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function A(){await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>{if(l.value){const a=ne(l,()=>{a(),t()})}else t()})}async function x(t){var D,r;if(t.key==="Tab"&&((D=L.value)==null||D.focus()),!["PageDown","PageUp","Home","End"].includes(t.key))return;const a=(r=e.value)==null?void 0:r.$el;if(!a)return;(t.key==="Home"||t.key==="End")&&a.scrollTo({top:t.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await A();const C=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(t.key==="PageDown"||t.key==="Home"){const g=a.getBoundingClientRect().top;for(const p of C)if(p.getBoundingClientRect().top>=g){p.focus();break}}else{const g=a.getBoundingClientRect().bottom;for(const p of[...C].reverse())if(p.getBoundingClientRect().bottom<=g){p.focus();break}}}return{onListScroll:h,onListKeydown:x}}const qe=H({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Se,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:De},itemColor:String,...Le({itemChildren:!1})},"Select"),_e=H({...qe(),...Z(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Te({transition:{component:ee}})},"VSelect"),Qe=te()({name:"VSelect",props:_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,L){let{slots:l}=L;const{t:c}=Ee(),h=M(),A=M(),x=U(e,"menu"),t=S({get:()=>x.value,set:n=>{var i;x.value&&!n&&((i=A.value)!=null&&i.ΨopenChildren)||(x.value=n)}}),{items:a,transformIn:C,transformOut:D}=Re(e),r=U(e,"modelValue",[],n=>C(n===null?[null]:Fe(n)),n=>{const i=D(n);return e.multiple?i:i[0]??null}),g=Ie(),p=S(()=>r.value.map(n=>a.value.find(i=>{const m=G(i.raw,e.itemValue),E=G(n.raw,e.itemValue);return m===void 0||E===void 0?!1:e.returnObject?e.valueComparator(m,E):e.valueComparator(i.value,n.value)})||n)),R=S(()=>p.value.map(n=>n.props.value)),o=$(!1),d=S(()=>t.value?e.closeText:e.openText);let f="",y;const k=S(()=>e.hideSelected?a.value.filter(n=>!p.value.some(i=>i===n)):a.value),T=S(()=>e.hideNoData&&!a.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),F=M(),{onListScroll:ue,onListKeydown:ie}=$e(F,h);function se(n){e.openOnClear&&(t.value=!0)}function ce(){T.value||(t.value=!t.value)}function re(n){var u,w;if(!n.key||e.readonly||g!=null&&g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(t.value=!0),["Escape","Tab"].includes(n.key)&&(t.value=!1),n.key==="Home"?(u=F.value)==null||u.focus("first"):n.key==="End"&&((w=F.value)==null||w.focus("last"));const i=1e3;function m(v){const P=v.key.length===1,V=!v.ctrlKey&&!v.metaKey&&!v.altKey;return P&&V}if(e.multiple||!m(n))return;const E=performance.now();E-y>i&&(f=""),f+=n.key.toLowerCase(),y=E;const K=a.value.find(v=>v.title.toLowerCase().startsWith(f));K!==void 0&&(r.value=[K])}function B(n){if(e.multiple){const i=R.value.findIndex(m=>e.valueComparator(m,n.value));if(i===-1)r.value=[...r.value,n];else{const m=[...r.value];m.splice(i,1),r.value=m}}else r.value=[n],t.value=!1}function de(n){var i;(i=F.value)!=null&&i.$el.contains(n.relatedTarget)||(t.value=!1)}function fe(){var n;o.value&&((n=h.value)==null||n.focus())}function ve(n){o.value=!0}function me(n){if(n==null)r.value=[];else if(Q(h.value,":autofill")||Q(h.value,":-webkit-autofill")){const i=a.value.find(m=>m.title===n);i&&B(i)}else h.value&&(h.value.value="")}return le(()=>{const n=!!(e.chips||l.chip),i=!!(!e.hideNoData||k.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=r.value.length>0,[E]=N.filterProps(e),K=m||!o.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(N,I({ref:h},E,{modelValue:r.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":me,focused:o.value,"onUpdate:focused":u=>o.value=u,validationValue:r.externalValue,dirty:m,class:["v-select",{"v-select--active-menu":t.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:K,"onClick:clear":se,"onMousedown:control":ce,onBlur:de,onKeydown:re,"aria-label":c(d.value),title:c(d.value)}),{...l,default:()=>s(O,null,[s(He,I({ref:A,modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:fe},e.menuProps),{default:()=>[i&&s(Be,{ref:F,selected:R.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ie,onFocusin:ve,onScrollPassive:ue,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var u,w,v;return[(u=l["prepend-item"])==null?void 0:u.call(l),!k.value.length&&!e.hideNoData&&(((w=l["no-data"])==null?void 0:w.call(l))??s(X,{title:c(e.noDataText)},null)),s(Ke,{renderless:!0,items:k.value},{default:P=>{var _;let{item:V,index:b,itemRef:pe}=P;const q=I(V.props,{ref:pe,key:b,onClick:()=>B(V)});return((_=l.item)==null?void 0:_.call(l,{item:V,index:b,props:q}))??s(X,q,{prepend:ye=>{let{isSelected:he}=ye;return s(O,null,[e.multiple&&!e.hideSelected?s(Me,{key:V.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,V.props.prependIcon&&s(W,{icon:V.props.prependIcon},null)])}})}}),(v=l["append-item"])==null?void 0:v.call(l)]}})]}),p.value.map((u,w)=>{var V;function v(b){b.stopPropagation(),b.preventDefault(),B(u)}const P={"onClick:close":v,onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:u.value,class:"v-select__selection"},[n?l.chip?s(ae,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>{var b;return[(b=l.chip)==null?void 0:b.call(l,{item:u,index:w,props:P})]}}):s(Oe,I({key:"chip",closable:e.closableChips,size:"small",text:u.title},P),null):((V=l.selection)==null?void 0:V.call(l,{item:u,index:w}))??s("span",{class:"v-select__selection-text"},[u.title,e.multiple&&w<p.value.length-1&&s("span",{class:"v-select__selection-comma"},[Ae(",")])])])})]),"append-inner":function(){var P;for(var u=arguments.length,w=new Array(u),v=0;v<u;v++)w[v]=arguments[v];return s(O,null,[(P=l["append-inner"])==null?void 0:P.call(l,...w),e.menuIcon?s(W,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),oe({isFocused:o,menu:t,select:B},h)}});export{Qe as V};
