import{_ as le}from"./close-d0614903.js";import{P as te}from"./topWrap-7ed854d8.js";import{p as ne,cS as oe,y as se,at as ue,an as re,c as f,r as v,M as ie,I as de,cr as ce,J as t,aw as w,a4 as A,cp as me,db as O,bs as pe,cQ as fe,K as ve,L as ye,a as Ve,N as be,a0 as he,P as S,Y as c,ad as ge,S as T,Q as _e,W as Ce,X as ke,a2 as g}from"./index-460b12fe.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Ie}from"./VSheet-45c58572.js";import{a as Fe,f as Pe,b as we,c as Ae,V as I}from"./VTextField-6c7419e4.js";import{m as xe,u as ze,V as H}from"./VInput-3638ab8b.js";import{V as Be}from"./VChip-9efe23af.js";/* empty css                                                                */import"./index-6b073cb7.js";const Re="/assets/startAuthor-be9b6e3f.png";const Me=ne({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...xe({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>oe(e).every(d=>d!=null&&typeof d=="object")},...Fe({clearable:!0})},"VFileInput"),Ue=se()({name:"VFileInput",inheritAttrs:!1,props:Me(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:_,emit:o,slots:r}=d;const{t:C}=ue(),i=re(e,"modelValue"),{isFocused:y,focus:s,blur:a}=ze(e),n=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),z=f(()=>(i.value??[]).reduce((l,u)=>{let{size:V=0}=u;return l+V},0)),B=f(()=>O(z.value,n.value)),F=f(()=>(i.value??[]).map(l=>{const{name:u="",size:V=0}=l;return e.showSize?`${u} (${O(V,n.value)})`:u})),L=f(()=>{var u;const l=((u=i.value)==null?void 0:u.length)??0;return e.showSize?C(e.counterSizeString,l,B.value):C(e.counterString,l)}),R=v(),M=v(),p=v(),Q=f(()=>y.value||e.active),U=f(()=>["plain","underlined"].includes(e.variant));function P(){var l;p.value!==document.activeElement&&((l=p.value)==null||l.focus()),y.value||s()}function j(l){$(l)}function J(l){o("mousedown:control",l)}function $(l){var u;(u=p.value)==null||u.click(),o("click:control",l)}function K(l){l.stopPropagation(),P(),pe(()=>{i.value=[],fe(e["onClick:clear"],l)})}return ie(i,l=>{(!Array.isArray(l)||!l.length)&&p.value&&(p.value.value="")}),de(()=>{const l=!!(r.counter||e.counter),u=!!(l||r.details),[V,W]=ce(_),[{modelValue:Le,...X}]=H.filterProps(e),[Y]=Pe(e);return t(H,w({ref:R,modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,class:["v-file-input",{"v-text-field--plain-underlined":U.value},e.class],style:e.style,"onClick:prepend":j},V,X,{centerAffix:!U.value,focused:y.value}),{...r,default:b=>{let{id:k,isDisabled:h,isDirty:D,isReadonly:N,isValid:q}=b;return t(we,w({ref:M,"prepend-icon":e.prependIcon,onMousedown:J,onClick:$,"onClick:clear":K,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Y,{id:k.value,active:Q.value||D.value,dirty:D.value,disabled:h.value,focused:y.value,error:q.value===!1}),{...r,default:G=>{var E;let{props:{class:Z,...ee}}=G;return t(A,null,[t("input",w({ref:p,type:"file",readonly:N.value,disabled:h.value,multiple:e.multiple,name:e.name,onClick:m=>{m.stopPropagation(),N.value&&m.preventDefault(),P()},onChange:m=>{if(!m.target)return;const ae=m.target;i.value=[...ae.files??[]]},onFocus:P,onBlur:a},ee,W),null),t("div",{class:Z},[!!((E=i.value)!=null&&E.length)&&(r.selection?r.selection({fileNames:F.value,totalBytes:z.value,totalBytesReadable:B.value}):e.chips?F.value.map(m=>t(Be,{key:m,size:"small",color:e.color},{default:()=>[m]})):F.value.join(", "))])])}})},details:u?b=>{var k,h;return t(A,null,[(k=r.details)==null?void 0:k.call(r,b),l&&t(A,null,[t("span",null,null),t(Ae,{active:!!((h=i.value)!=null&&h.length),value:L.value},r.counter)])])}:void 0})}),me({},R,M,p)}}),x=e=>(Ce("data-v-0c624ddd"),e=e(),ke(),e),$e=x(()=>c("div",{class:"invite-cont"},[c("img",{src:Re,alt:""})],-1)),De=x(()=>c("p",null,"立即申请",-1)),Ne=[De],Ee={class:"prop-title flexEnd"},Oe=x(()=>c("p",null,"明星投资者申请",-1)),Te={class:"btn-box"},He={__name:"StarAuthor",setup(e){ve(),ye();const d=v(!1);v(123123);const _=v(),o=Ve({name:"",company:"",year:0,summary:"",avatar:""}),r=()=>{if(!C(o)){g.dispatch("snackbar/warning",{active:!0,body:"所有内容不能为空"});return}g.dispatch("trade/apply",o).then(()=>{g.dispatch("snackbar/success",{active:!0,body:"申请成功，请等待审核！"}),d.value=!1})},C=s=>{for(var a in s)if(s.hasOwnProperty(a)&&(s[a]===null||s[a]===void 0||s[a]===""))return!1;return!0},i=s=>{let a=new FormData;a.append("file",s[0]),g.dispatch("trade/uploadFile",a).then(n=>{o.avatar=n.filename,g.dispatch("snackbar/success",{active:!0,body:"上传成功"})})},y=v([s=>!s||!s.length||s[0].size<2e6||"Avatar size should be less than 2 MB!"]);return(s,a)=>(be(),he("div",null,[t(te,null,{headerCenter:S(()=>[T("明星投资者计划")]),_:1}),$e,c("div",{class:"bottom-btn flexCenter",onClick:a[0]||(a[0]=n=>d.value=!0)},Ne),t(ge,{modelValue:d.value,"onUpdate:modelValue":a[7]||(a[7]=n=>d.value=n),class:"align-center justify-center"},{default:S(()=>[t(Ie,{style:{},width:"350px",rounded:"lg "},{default:S(()=>[c("div",Ee,[Oe,c("img",{src:le,alt:"",onClick:a[1]||(a[1]=n=>d.value=!1)})]),c("div",null,[t(I,{modelValue:o.name,"onUpdate:modelValue":a[2]||(a[2]=n=>o.name=n),density:"default",variant:"underlined",clearable:"","hide-details":"",label:"操盘师名字"},null,8,["modelValue"]),t(I,{modelValue:o.company,"onUpdate:modelValue":a[3]||(a[3]=n=>o.company=n),variant:"underlined",clearable:"","hide-details":"",label:"就职单位"},null,8,["modelValue"]),t(I,{modelValue:o.year,"onUpdate:modelValue":a[4]||(a[4]=n=>o.year=n),variant:"underlined",clearable:"","hide-details":"",label:"投资年数（单位：年）"},null,8,["modelValue"]),t(I,{modelValue:o.summary,"onUpdate:modelValue":a[5]||(a[5]=n=>o.summary=n),variant:"underlined",clearable:"","hide-details":"",label:"特别说明"},null,8,["modelValue"]),t(Ue,{rules:y.value,modelValue:_.value,"onUpdate:modelValue":[a[6]||(a[6]=n=>_.value=n),i],accept:"image/png, image/jpeg, image/bmp",placeholder:"请上传个人照片","prepend-icon":"mdi-camera",variant:"underlined","hide-details":"",label:"上传图片"},null,8,["rules","modelValue"])]),c("div",Te,[t(_e,{block:"",color:"#e61919",onClick:r},{default:S(()=>[T("提交")]),_:1})])]),_:1})]),_:1},8,["modelValue"])]))}},ea=Se(He,[["__scopeId","data-v-0c624ddd"]]);export{ea as default};
