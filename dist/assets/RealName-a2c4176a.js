import{P as I}from"./topWrap-d8042dc2.js";import{M as V,N as b,z as d,O as y,P as e,A as i,Q as f,x as o,C as l,F as m,R as u,D as k,a2 as x}from"./index-f82b3d32.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{V as R}from"./VForm-070bd9ed.js";import{V as p}from"./VTextField-a3badff2.js";/* empty css                                                                */import"./VInput-335c84e6.js";import"./index-b6624f02.js";const D={key:0,class:"login-box"},w={__name:"RealName",setup(A){V(),b(),d(!0);const a=d(!1);y(()=>{e.state.user.userInfo.code&&(a.value=!0),e.state.user.userInfo.user_name||e.dispatch("user/getInfo")});const _=async()=>{if(e.state.user.userInfo.code==""||e.state.user.userInfo.name==""){e.dispatch("snackbar/warning",{active:!0,body:"身份信息不能为空"});return}if(h(e.state.user.userInfo.code)==!1){e.dispatch("snackbar/warning",{active:!0,body:"请输入合法的身份证号码!"});return}e.dispatch("user/changeName",{name:e.state.user.userInfo.name,code:e.state.user.userInfo.code}).then(()=>{e.dispatch("snackbar/success",{active:!0,body:"提交成功!"}),e.dispatch("user/getInfo"),a.value=!0})},h=t=>{if(!/(^\d{15}$)|(^\d{17}(\d|X)$)/.test(t))return!1;if(t.length===18){const r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],v="10X98765432";let c=0;for(let n=0;n<17;n++)c+=parseInt(t.charAt(n))*r[n];const g=c%11;if(v.charAt(g)!==t.charAt(17))return!1}return!0};return(t,s)=>(i(),f("div",null,[o(I,null,{headerCenter:l(()=>[m("实名认证")]),_:1}),o(R,{ref:"form",class:"px-5"},{default:l(()=>[o(p,{variant:"underlined",modelValue:u(e).state.user.userInfo.name,"onUpdate:modelValue":s[0]||(s[0]=r=>u(e).state.user.userInfo.name=r),required:"",clearable:"",readonly:a.value,label:"请输入您的姓名","hide-details":"auto"},null,8,["modelValue","readonly"]),o(p,{variant:"underlined",modelValue:u(e).state.user.userInfo.code,"onUpdate:modelValue":s[1]||(s[1]=r=>u(e).state.user.userInfo.code=r),required:"",counter:18,readonly:a.value,label:"请输入身份证号码"},null,8,["modelValue","readonly"]),a.value?x("",!0):(i(),f("div",D,[o(k,{color:"success",class:"mt-4",size:"x-large",block:"",onClick:_},{default:l(()=>[m(" 提交认证 ")]),_:1})]))]),_:1},512)]))}},X=N(w,[["__scopeId","data-v-8a5fa8aa"]]);export{X as default};
