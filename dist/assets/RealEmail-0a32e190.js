import{K as b,r as c,a as k,o as y,ae as R,N as u,a0 as m,J as t,P as o,Y as r,Q as C,a1 as d,S as _,T as f,a5 as E,W as I,X as w}from"./index-6bd31cef.js";import{P as S}from"./topWrap-918a980d.js";import{e as N,p as z}from"./vaildRule-e424d183.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A}from"./VForm-f7e8dd05.js";import{V as v}from"./VTextField-c503ad92.js";import{V as D}from"./VDivider-b6cc6d15.js";/* empty css                                                                */import"./VInput-65befc03.js";import"./index-e6ccdae2.js";import"./index-668f1232.js";const h=i=>(I("data-v-377d188f"),i=i(),w(),i),P={class:"login-box"},T=h(()=>r("p",null,"邮箱地址",-1)),Z=h(()=>r("p",null,"回执码",-1)),q={key:0},F={key:1},U={class:"login-box"},$={__name:"RealEmail",setup(i){b(),c("password");const e=k({email:"",code:""}),a=c(0),V=()=>{if(!g(e.email)){d.dispatch("snackbar/warning",{active:!0,body:"请输入有效的邮件地址"});return}a.value=60,d.dispatch("user/sendEmailCode",e.email).then(()=>{let s=setInterval(()=>{a.value--,a.value<=0&&(a.value=0,clearInterval(s))},1e3)})},g=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s),x=async()=>{const{valid:s}=await p.ctx.$refs.form.validate();s&&d.dispatch("user/changEmail",e).then(()=>{d.dispatch("snackbar/success",{active:!0,body:"修改成功"})})};let p=c();return y(()=>{p=R()}),(s,l)=>(u(),m("div",null,[t(S,null,{headerCenter:o(()=>[_("绑定邮箱")]),_:1}),r("div",P,[t(A,{ref:"form"},{default:o(()=>[t(v,{variant:"underlined",modelValue:e.email,"onUpdate:modelValue":l[0]||(l[0]=n=>e.email=n),required:"",clearable:"",label:"请输入您的邮箱地址","hide-details":"auto",rules:f(N)},{prepend:o(()=>[T]),_:1},8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:e.code,"onUpdate:modelValue":l[1]||(l[1]=n=>e.code=n),required:"",counter:12,label:"请输入回执码",type:"Number",rules:f(z)},{prepend:o(()=>[Z]),default:o(()=>[r("div",{class:"send-code",onClick:V},[a.value==0?(u(),m("p",q,"点击获取")):(u(),m("p",F,"重新获取("+E(a.value)+")",1))])]),_:1},8,["modelValue","rules"])]),_:1},512)]),t(D,{thickness:3}),r("div",U,[t(C,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:x},{default:o(()=>[_(" 修改邮箱 ")]),_:1})])]))}},O=B($,[["__scopeId","data-v-377d188f"]]);export{O as default};
