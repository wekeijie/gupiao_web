import{M as F,z as p,ad as H,O as M,P as u,A as v,Q as V,x as t,C as e,I as r,D as k,S as x,T as N,U as C,F as a,E as S,af as P,ck as R,X as c,W as A,B,ab as G,Y as O,ah as Q,Z as W,_ as X,G as Y,H as Z}from"./index-a9845ce0.js";import{P as j}from"./topWrap-41aff175.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f}from"./VRow-88472c1d.js";import{V as T}from"./VSheet-aee9ade6.js";import{V as l}from"./VCol-f6d04242.js";import{V as J}from"./VDivider-12b3dadf.js";import{a as K,c as tt,V as et}from"./VList-f1697cca.js";import{V as at}from"./VBottomSheet-23b2244f.js";/* empty css                                                                */import"./index-497b9635.js";import"./ssrBoot-6baade50.js";const D=h=>(Y("data-v-796152bf"),h=h(),Z(),h),lt={class:"bg-color ui-min-height"},st={class:"topup-bg"},ot={class:"px-3 pt-10"},ct={class:"px-3 mt-n16"},dt={class:"text-red"},ut=D(()=>r("div",{class:"text-body-1 mb-3"},"请选择申请额度",-1)),it={class:"text-h6"},rt={class:"text-body-2"},nt=D(()=>r("span",{class:"text-h6"},"合约详情",-1)),pt={__name:"ApplyContra",setup(h){const E=F();p();const b=p(!1),m=p({title:"",day:""}),_=p({}),w=p(0),i=p(500),y=p(!1),o=H({total:0,expand:0,loss_waring:0,loss_fail:0,rate:0});M(()=>{u.dispatch("user/userInfo"),u.dispatch("contract/getType").then(()=>{I(u.state.contract.typeList[0])})});const U=()=>{const n={amount:i.value,type_id:m.value.id,limit_id:_.value.id};u.dispatch("contract/create",n).then(()=>{u.dispatch("snackbar/success",{active:!0,body:"申请成功！"}),y.value=!1,E.push("/contract")})},I=n=>{m.value=n,$(n.id),b.value=!1},$=n=>{u.dispatch("contract/getLimit",n).then(()=>{L(0)})},L=(n,d)=>{w.value=d,_.value=n},z=()=>{if(i.value>u.state.user.info.balance){u.dispatch("snackbar/warning",{active:!0,body:"保证金不足，请存款！"});return}o.expand=i.value*_.value.limit,o.total=o.expand+i.value,o.loss_waring=o.expand+i.value*.5,o.loss_fail=o.expand+i.value*.2,o.rate=o.expand*(_.value.rate/100),y.value=!0};return(n,d)=>(v(),V(C,null,[t(j,null,{headerCenter:e(()=>[a("申请合约")]),_:1}),r("div",lt,[r("div",st,[r("div",ot,[t(f,{class:"ma-0 pa-0 border-bottom-line"},{default:e(()=>[t(l,{class:"px-0",cols:"1"},{default:e(()=>[t(S,{color:"white"},{default:e(()=>[a("mdi-currency-cny")]),_:1})]),_:1}),t(l,{cols:"11"},{default:e(()=>[P(r("input",{type:"number",class:"amount",placeholder:"请输入保证金金额","onUpdate:modelValue":d[0]||(d[0]=s=>i.value=s)},null,512),[[R,i.value]])]),_:1})]),_:1})])]),r("div",ct,[t(T,{class:"bg-white rounded-lg py-3"},{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("钱包可用余额")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right"},{default:e(()=>[a("¥"+c(x(u).state.user.info.balance),1)]),_:1})]),_:1}),t(J),t(f,{class:"ma-0 pa-0 mt-2"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("合约类型")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right",onClick:d[1]||(d[1]=s=>b.value=!0)},{default:e(()=>[r("span",dt,c(m.value.title+"-操盘"+m.value.day+"天"),1),t(S,{size:"large",color:"#8E8E8E"},{default:e(()=>[a("mdi-chevron-right")]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{class:"bg-white rounded-lg py-3 mt-3 px-3"},{default:e(()=>[ut,t(f,{class:"ma-0 pa-0"},{default:e(()=>[(v(!0),V(C,null,A(x(u).state.contract.limitList,(s,g)=>(v(),B(l,{cols:"3",class:G(["text-center list-bg border-line rounded-lg mr-7 mb-3",{"active-style":w.value==g}]),key:s.title,onClick:_t=>L(s,g)},{default:e(()=>[r("div",it,c(s.title),1),r("div",rt,c(s.limit*i.value),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])]),t(k,{block:"",color:"#445CED",class:"text-white rounded-0 py-7 text-h6 fixed",style:{bottom:"0px"},onClick:z},{default:e(()=>[a("立即申请")]),_:1}),t(x(at),{modelValue:b.value,"onUpdate:modelValue":d[2]||(d[2]=s=>b.value=s)},{default:e(()=>[t(K,null,{default:e(()=>[t(tt,{class:"w-100"},{default:e(()=>[a(" 选择合约类型 ")]),_:1}),(v(!0),V(C,null,A(x(u).state.contract.typeList,s=>(v(),B(et,{key:s.title,title:s.title+s.day+"天",onClick:g=>I(s)},null,8,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:y.value,"onUpdate:modelValue":d[4]||(d[4]=s=>y.value=s),persistent:"",width:"1024"},{default:e(()=>[t(O,null,{default:e(()=>[t(Q,null,{default:e(()=>[nt]),_:1}),t(W,null,{default:e(()=>[t(f,{class:"mx-0 pa-0 text-body-1 text-grey-darken-1"},{default:e(()=>[t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("总操盘资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.total),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("保证金/本金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(i.value),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("配资资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand)+"/"+c(_.value.limit),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损预警线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_waring),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损平仓线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_fail),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("利率")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(_.value.rate+"%"),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("产生利息")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.rate.toFixed(2))+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("资金使用时间")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(m.value.day)+"天后自动续期",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("可用利息券")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(x(u).state.user.info.interest_amount)+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("准备资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand),1)]),_:1})]),_:1})]),_:1}),t(X,null,{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:d[3]||(d[3]=s=>y.value=!1)},{default:e(()=>[a(" 取消 ")]),_:1})]),_:1}),t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:U},{default:e(()=>[a(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},It=q(pt,[["__scopeId","data-v-796152bf"]]);export{It as default};
