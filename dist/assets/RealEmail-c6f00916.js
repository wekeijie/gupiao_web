import{P as b,A as c,an as k,R as y,aD as R,B as u,T as m,y as t,D as o,J as r,E,S as n,G as _,W as f,Z as I,H as C,I as w}from"./index-94436294.js";import{P as S}from"./topWrap-7c54d6f8.js";import{e as B,p as D}from"./vaildRule-b77ccc28.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A}from"./VForm-45ed1997.js";import{V as v}from"./VTextField-7aa2378d.js";import{V as N}from"./VDivider-941b6985.js";/* empty css                                                                */import"./VInput-168ffb66.js";import"./index-c7623f12.js";const h=i=>(C("data-v-377d188f"),i=i(),w(),i),Z={class:"login-box"},P=h(()=>r("p",null,"邮箱地址",-1)),T=h(()=>r("p",null,"回执码",-1)),q={key:0},F={key:1},H={class:"login-box"},U={__name:"RealEmail",setup(i){b(),c("password");const e=k({email:"",code:""}),a=c(0),V=()=>{if(!g(e.email)){n.dispatch("snackbar/warning",{active:!0,body:"请输入有效的邮件地址"});return}a.value=60,n.dispatch("user/sendEmailCode",e.email).then(()=>{let s=setInterval(()=>{a.value--,a.value<=0&&(a.value=0,clearInterval(s))},1e3)})},g=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s),x=async()=>{const{valid:s}=await p.ctx.$refs.form.validate();s&&n.dispatch("user/changEmail",e).then(()=>{n.dispatch("snackbar/success",{active:!0,body:"修改成功"})})};let p=c();return y(()=>{p=R()}),(s,l)=>(u(),m("div",null,[t(S,null,{headerCenter:o(()=>[_("绑定邮箱")]),_:1}),r("div",Z,[t(A,{ref:"form"},{default:o(()=>[t(v,{variant:"underlined",modelValue:e.email,"onUpdate:modelValue":l[0]||(l[0]=d=>e.email=d),required:"",clearable:"",label:"请输入您的邮箱地址","hide-details":"auto",rules:f(B)},{prepend:o(()=>[P]),_:1},8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:e.code,"onUpdate:modelValue":l[1]||(l[1]=d=>e.code=d),required:"",counter:12,label:"请输入回执码",type:"Number",rules:f(D)},{prepend:o(()=>[T]),default:o(()=>[r("div",{class:"send-code",onClick:V},[a.value==0?(u(),m("p",q,"点击获取")):(u(),m("p",F,"重新获取("+I(a.value)+")",1))])]),_:1},8,["modelValue","rules"])]),_:1},512)]),t(N,{thickness:3}),r("div",H,[t(E,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:x},{default:o(()=>[_(" 修改邮箱 ")]),_:1})])]))}},X=z(U,[["__scopeId","data-v-377d188f"]]);export{X as default};
