import{M as g,z as c,ab as k,N as y,ao as C,A as u,P as m,x as t,C as o,I as r,D as I,O as d,F as _,Q as f,X as R,G as E,H as w}from"./index-19c6f7b8.js";import{P as z}from"./topWrap-a52c9bb3.js";import{e as N,p as S}from"./vaildRule-57c65130.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{V as B}from"./VForm-a60bad8a.js";import{V as v}from"./VTextField-e56bfdfa.js";import{V as D}from"./VDivider-9ecda47d.js";/* empty css                                                                */import"./VInput-90d7b109.js";import"./index-01ea2f43.js";const h=i=>(E("data-v-377d188f"),i=i(),w(),i),F={class:"login-box"},P=h(()=>r("p",null,"邮箱地址",-1)),Z=h(()=>r("p",null,"回执码",-1)),q={key:0},H={key:1},M={class:"login-box"},T={__name:"RealEmail",setup(i){g(),c("password");const e=k({email:"",code:""}),a=c(0),V=()=>{if(!x(e.email)){d.dispatch("snackbar/warning",{active:!0,body:"请输入有效的邮件地址"});return}a.value=60,d.dispatch("user/sendEmailCode",e.email).then(()=>{let s=setInterval(()=>{a.value--,a.value<=0&&(a.value=0,clearInterval(s))},1e3)})},x=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s),b=async()=>{const{valid:s}=await p.ctx.$refs.form.validate();s&&d.dispatch("user/changEmail",e).then(()=>{d.dispatch("snackbar/success",{active:!0,body:"修改成功"})})};let p=c();return y(()=>{p=C()}),(s,l)=>(u(),m("div",null,[t(z,null,{headerCenter:o(()=>[_("绑定邮箱")]),_:1}),r("div",F,[t(B,{ref:"form"},{default:o(()=>[t(v,{variant:"underlined",modelValue:e.email,"onUpdate:modelValue":l[0]||(l[0]=n=>e.email=n),required:"",clearable:"",label:"请输入您的邮箱地址","hide-details":"auto",rules:f(N)},{prepend:o(()=>[P]),_:1},8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:e.code,"onUpdate:modelValue":l[1]||(l[1]=n=>e.code=n),required:"",counter:12,label:"请输入回执码",type:"Number",rules:f(S)},{prepend:o(()=>[Z]),default:o(()=>[r("div",{class:"send-code",onClick:V},[a.value==0?(u(),m("p",q,"点击获取")):(u(),m("p",H,"重新获取("+R(a.value)+")",1))])]),_:1},8,["modelValue","rules"])]),_:1},512)]),t(D,{thickness:3}),r("div",M,[t(I,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:b},{default:o(()=>[_(" 修改邮箱 ")]),_:1})])]))}},W=A(T,[["__scopeId","data-v-377d188f"]]);export{W as default};
