import{P as I,A as m,an as x,R as w,aD as C,S as e,B as i,T as u,y as l,D as c,J as p,E as R,G as f,W as d,Z as b}from"./index-734265e1.js";import{P as S}from"./topWrap-008b5c21.js";import{a as V,c as h}from"./vaildRule-86e46a59.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{V as B}from"./VForm-b4bc6a04.js";import{V as _}from"./VTextField-065e20f7.js";import{V as D}from"./VDivider-f1fcfd2c.js";/* empty css                                                                */import"./VInput-c70ea874.js";import"./index-25287069.js";const N={class:"login-box"},q={key:0},U={key:1},T={key:0},E={key:1},F={class:"login-box"},M={__name:"RealPhone",setup(z){I(),m("password");const a=x({mobile:"",code:"",new_code:""}),t=m(0),k=()=>{t.value=60,e.dispatch("user/sendSms","");let r=setInterval(()=>{t.value--,t.value<=0&&(t.value=0,clearInterval(r))},1e3)},n=m(0),g=()=>{if(a.mobile.length<11){e.dispatch("snackbar/warning",{active:!0,body:"新手机号码不能为空"});return}n.value=60,e.dispatch("user/sendSms",a.mobile);let r=setInterval(()=>{n.value--,n.value<=0&&(n.value=0,clearInterval(r))},1e3)},y=async()=>{const{valid:r}=await v.ctx.$refs.form.validate();r&&e.dispatch("user/changeMobile",a).then(()=>{e.dispatch("snackbar/success",{active:!0,body:"修改成功!"}),e.dispatch("user/getInfo")})};let v=m();return w(()=>{v=C(),e.state.user.userInfo.user_name||e.dispatch("user/getInfo")}),(r,o)=>(i(),u("div",null,[l(S,null,{headerCenter:c(()=>[f("已绑定手机号")]),_:1}),p("div",N,[l(B,{ref:"form"},{default:c(()=>[l(_,{variant:"underlined",modelValue:d(e).state.user.userInfo.mobile,"onUpdate:modelValue":o[0]||(o[0]=s=>d(e).state.user.userInfo.mobile=s),required:"",readonly:"",counter:12,clearable:"",label:"手机号码","hide-details":"auto","prepend-icon":"mdi-phone",rules:d(V)},null,8,["modelValue","rules"]),l(_,{variant:"underlined",modelValue:a.code,"onUpdate:modelValue":o[1]||(o[1]=s=>a.code=s),required:"",counter:12,label:"请输入旧手机验证码",type:"Number","prepend-icon":"mdi-lock",rules:d(h)},{default:c(()=>[p("div",{class:"send-code",onClick:k},[t.value==0?(i(),u("p",q,"点击发送")):(i(),u("p",U,"重新发送("+b(t.value)+")",1))])]),_:1},8,["modelValue","rules"]),l(_,{variant:"underlined",modelValue:a.mobile,"onUpdate:modelValue":o[2]||(o[2]=s=>a.mobile=s),required:"",counter:12,clearable:"",label:"新手机号码","hide-details":"auto","prepend-icon":"mdi-phone",rules:d(V)},null,8,["modelValue","rules"]),l(_,{variant:"underlined",modelValue:a.new_code,"onUpdate:modelValue":o[3]||(o[3]=s=>a.new_code=s),required:"",counter:12,label:"请输入新手机验证码",type:"Number","prepend-icon":"mdi-lock",rules:d(h)},{default:c(()=>[p("div",{class:"send-code",onClick:g},[n.value==0?(i(),u("p",T,"点击发送")):(i(),u("p",E,"重新发送("+b(n.value)+")",1))])]),_:1},8,["modelValue","rules"])]),_:1},512)]),l(D,{thickness:3}),p("div",F,[l(R,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:y},{default:c(()=>[f(" 更换手机号 ")]),_:1})])]))}},O=P(M,[["__scopeId","data-v-a3125bac"]]);export{O as default};
