import{L as yt,a0 as bt,z as m,ac as J,O as xt,P as s,A as r,Q as d,x as u,C as c,I as t,R as i,Y as o,F as v,ad as b,ah as W,ai as X,af as g,D as j,B as Z,al as wt,ae as V,E as tt,az as Vt,T as k,U as y,aj as Ct,G as Bt,H as $t}from"./index-328f9261.js";import{_ as St}from"./refresh-9fe172ae.js";import{M as Lt,_ as Tt,a as It,b as Ut,c as Ft}from"./MarqueeText.common-45903d85.js";import{_ as Nt}from"./rightImg-2896a6bb.js";import{_ as qt}from"./search-e322bae4.js";import{_ as At}from"./close-d0614903.js";import{P as Dt}from"./topWrap-4a6af669.js";import{_ as Ot}from"./_plugin-vue_export-helper-c27b6911.js";import{V as et}from"./VSelect-108bef6e.js";import{V as st}from"./VTextField-1d8f5e99.js";import{V as lt,a as at}from"./VCarouselItem-50ab0508.js";import{V as ot,a as zt,b as Et}from"./VList-52ff3cf9.js";import{V as Mt,a as H}from"./VTabs-66f9b5b7.js";import{V as Rt}from"./VBottomSheet-383ceb9d.js";import"./_commonjsHelpers-de833af9.js";/* empty css                                                                */import"./VInput-291c063a.js";import"./index-bc2a4995.js";import"./VVirtualScroll-6e840817.js";import"./VCheckboxBtn-8c765ca4.js";import"./VSelectionControl-a60cc638.js";import"./VChip-f22ad296.js";import"./VWindowItem-2d75d134.js";import"./ssrBoot-0e06b97c.js";import"./VDivider-d24d7465.js";const p=U=>(Bt("data-v-78e0638e"),U=U(),$t(),U),jt=p(()=>t("img",{src:St,alt:"",class:"refresh-data"},null,-1)),Ht={class:"hores-race-lamp flexStart"},Pt=p(()=>t("img",{src:Tt,alt:"",class:"refresh-data"},null,-1)),Gt=p(()=>t("span",{style:{color:"#f90"}}," 该平台可以直接扩大股票配资客户的交易资金，使股票配资客户获得充裕的资金，成本低，盈利100%属于用户。",-1)),Kt={class:"row-tab-box flexBetween"},Qt=p(()=>t("h2",null,"合约",-1)),Yt=p(()=>t("img",{src:Nt,alt:"",class:"img-right"},null,-1)),Jt={class:"row-tab-box flexBetween"},Wt=p(()=>t("h2",null,"股票名称/代码",-1)),Xt={class:"flexEnd"},Zt={class:"flexBetween new-title-box"},te=p(()=>t("div",null,[t("img",{src:It,alt:"",class:"img-right"}),t("img",{src:Ut,alt:"",class:"img-right"})],-1)),ee={class:"flexBetween controls-box"},se={style:{},class:"controls-left"},le=p(()=>t("div",{class:"flexBetween buy-sell-box"},[t("p",{class:"buy-box"},"买入")],-1)),ae={key:0,class:"buy"},oe={class:"up-down-number flexBetween"},ne={class:"roseColor"},ie={class:"fallColor"},re={class:"input-box",style:{"margin-top":"15px"}},de={class:"component-box flexBetween"},ue={class:"up-down-number flexBetween"},ce={class:"roseColor"},_e={class:"fallColor"},pe={key:1,class:"sell py-10"},me={class:"controls-right"},ve={key:0,class:"new-box"},he={class:"fallColor"},fe=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px",margin:"5px 0"}},null,-1)),ge={class:"pinkColor"},ke={key:1,class:"new-box"},ye=p(()=>t("div",{class:"flexBetween records-list pr-2"},[t("p",null,"时间"),t("p",null,"价格"),t("p",null,"量")],-1)),be={class:"pinkColor"},xe={class:"flexAroud"},we={class:"flexCenter cut-detail"},Ve=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"5px",margin:"10px 0"}},null,-1)),Ce={class:"table-box flexStart"},Be={key:0,class:"new-box"},$e=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"成本"),t("th",{style:{"text-align":"right"}},"数量"),t("th",{style:{"text-align":"right"},class:"cutUp"},"浮动盈亏"),t("th",{style:{"text-align":"right"},class:"cutUp"},"操作")],-1)),Se=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Le={class:"tr-one"},Te={class:"tr-two text-right"},Ie={class:"tr-two-number"},Ue={class:"tr-three",style:{"text-align":"right"}},Fe={class:"tr-four",style:{"text-align":"right"}},Ne={class:"text-right"},qe={key:1,class:"new-box"},Ae={class:"tab-box"},De={key:0},Oe=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间"),t("th",null,"操作")],-1)),ze=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Ee={class:"tr-one"},Me={class:"tr-two",style:{"text-align":"right"}},Re={class:"tr-two-number"},je={class:"tr-three",style:{"text-align":"right"}},He={class:"tr-four",style:{"text-align":"right"}},Pe=["onClick"],Ge={key:1},Ke=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"金额"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),Qe=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Ye={class:"tr-one"},Je={class:"tr-two",style:{"text-align":"right"}},We={class:"tr-two-number"},Xe={class:"tr-three",style:{"text-align":"right"}},Ze={class:"tr-four",style:{"text-align":"right"}},ts={key:2},es=p(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),ss=p(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),ls={class:"tr-one"},as={class:"tr-two",style:{"text-align":"right"}},os={class:"tr-two-number"},ns={class:"tr-three",style:{"text-align":"right"}},is={class:"tr-four",style:{"text-align":"right"}},rs={class:"flexBetween sheet-top"},ds=p(()=>t("div",{class:"sheet-sure"},[v("请选择您的合约"),t("span",null,"[新开合约]")],-1)),us={class:"flexBetween type-list"},cs={class:"list-select",src:Ft,alt:""},_s={__name:"Trading",setup(U){const nt=yt(),C=bt(),h=m(0),L=m(1),B=m(0),$=m(0),S=m(0),D=m(0),T=m(null),O=m(""),I=m(!1);m(!1),m("");const f=J({amount:0,limit:0,order_id:""}),w=m("0.000001"),z=m("平安银行"),it=m("000001"),F=J({buy:[],sell:[]}),N=m("market_price"),rt=[{title:"市价交易",key:"market_price"},{title:"限价委托",key:"limit_price"}],P=m([]);xt(()=>{C.query.code&&(it.value=C.query.code),C.query.prefix?w.value=C.query.prefix:w.value=s.state.trading.prefix,C.query.title?z.value=C.query.title:z.value=s.state.trading.title,s.state.market.stock_new_info.f107+"."+s.state.market.stock_new_info.f57!=w.value&&s.dispatch("market/getStockNewInfo",w.value),s.state.market.stock_new_info.f107<2&&s.dispatch("market/getBuySellFive",w.value).then(e=>{F.buy=e.buy,F.sell=e.sell}),s.getters.token?s.dispatch("contract/getMinList"):R.value="请登录选择合约",ut(),M(),q(0)});const E=l=>{S.value=l,l==0||l==2?(s.commit("trading/clearTrustList"),q(l)):l==1&&G()},dt=()=>{console.log(T.value)},M=()=>{s.dispatch("trading/getActiveList")},ut=async()=>{const l=await s.dispatch("market/getStockFenShi",w.value);P.value=ct(l)},ct=l=>l.map(n=>{const _=n.split(",");return{date:_[0],price:parseFloat(_[1]),limit:parseInt(_[2],10)}}),G=()=>{s.dispatch("trading/getSuccessList")},_t=l=>{s.dispatch("trading/cancelOrder",l).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"取消成功！"}),q(0)})},pt=()=>{if(!T.value){s.dispatch("snackbar/warning",{active:!0,body:"请选择订单！"});return}s.dispatch("trading/sell",{key:T.value}).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"Success"}),M(),G()})},K=l=>{if(l=="a"&&(h.value=h.value+100),l=="c"&&h.value>0){let e=h.value-100;e>0?h.value=e:h.value=0}},mt=()=>{if(!s.getters.token){s.dispatch("snackbar/warning",{active:!0,body:"请登录！"});return}if(f.order_id==""){s.dispatch("snackbar/warning",{active:!0,body:"请选择合约！"});return}const l={symbol:w.value,number:h.value,contract:f.order_id,type:N.value,title:z.value,price:O.value};if(l.number<100&&l.number%100!==0){s.dispatch("snackbar/warning",{active:!0,body:"数量必须是100的倍数"});return}s.dispatch("trading/buy",l).then(e=>{s.dispatch("snackbar/success",{active:!0,body:"购买成功"}),M(),q(0)})},vt=l=>{nt.push(l)},q=l=>{s.dispatch("trading/getTrustList",l)},A=(l,e)=>{if(f.limit<=0)return!1;let n=Math.floor(f.limit/l);if(n>=100){let _=ht(n);_>f.limit?h.value=_-100:h.value=_}else h.value=100;L.value=e},ht=l=>{const e=l%100;return e===0?l:l+(100-e)},ft=l=>{if(l<0)return"green";if(l===0||l==="")return"black";if(l>0)return"red"},R=m("请选择合约"),Q=m(0),gt=l=>{Q.value=l,R.value=s.state.contract.minList[l].contract_type_title+s.state.contract.minList[l].contract_limit_limit+"倍",f.amount=s.state.contract.minList[l].balance,f.limit=parseFloat(f.amount/V(s.state.market.stock_new_info.f43,s.state.market.stock_new_info.f59)).toFixed(2),f.order_id=s.state.contract.minList[l].order_id},kt=l=>(l=l.toString(),l.replace(/(\d{2})(\d{2})(\d{2})/,"$1:$2")),Y=l=>l>0?"+"+l:l;return(l,e)=>(r(),d("div",null,[u(Dt,null,{headerCenter:c(()=>[v("交易")]),headerRight:c(()=>[jt]),_:1}),t("div",Ht,[Pt,u(i(Lt),{repeat:1},{default:c(()=>[Gt]),_:1})]),t("div",Kt,[Qt,t("div",{class:"flexEnd",onClick:e[0]||(e[0]=n=>I.value=!0)},[t("p",null,o(R.value),1),Yt])]),t("div",Jt,[Wt,t("div",Xt,[t("p",null,[v(o(i(s).state.market.stock_new_info.f58),1),t("span",null,"("+o(i(wt)(i(s).state.market.stock_new_info.f57,i(s).state.market.stock_new_info.f107))+")",1)]),t("img",{src:qt,alt:"",class:"img-search",onClick:e[1]||(e[1]=n=>vt("/Search"))})])]),t("div",Zt,[t("p",null,[v(" 最新 "),t("span",{class:b("text-"+ft(i(V)(i(s).state.market.stock_new_info.f169,i(s).state.market.stock_new_info.f59)))},o(i(V)(i(s).state.market.stock_new_info.f43,i(s).state.market.stock_new_info.f59))+" "+o(Y(i(V)(i(s).state.market.stock_new_info.f169,i(s).state.market.stock_new_info.f59)))+" "+o(Y(i(V)(i(s).state.market.stock_new_info.f170,i(s).state.market.stock_new_info.f59))+"%"),3)]),te]),t("div",ee,[t("div",se,[le,D.value==0?(r(),d("div",ae,[u(et,{label:"类型",items:rt,"item-title":"title","item-value":"key",modelValue:N.value,"onUpdate:modelValue":e[2]||(e[2]=n=>N.value=n),variant:"solo-filled","hide-details":"",class:"mt-2"},null,8,["modelValue"]),t("div",oe,[t("p",null,[v(" 涨停"),t("span",ne,o(i(V)(i(s).state.market.stock_new_info.f51,i(s).state.market.stock_new_info.f59)),1)]),t("p",null,[v(" 跌停"),t("span",ie,o(i(V)(i(s).state.market.stock_new_info.f52,i(s).state.market.stock_new_info.f59)),1)])]),t("div",re,[W(u(st,{type:"string",modelValue:O.value,"onUpdate:modelValue":e[3]||(e[3]=n=>O.value=n),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":"",label:"价格"},null,8,["modelValue"]),[[X,N.value=="limit_price"]]),u(st,{type:"number",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=n=>h.value=n),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":""},{append:c(()=>[u(tt,{color:"black",onClick:e[4]||(e[4]=n=>K("c")),class:"down-num"},{default:c(()=>[v(" mdi-minus ")]),_:1}),u(tt,{color:"black",onClick:e[5]||(e[5]=n=>K("a")),class:"up-num"},{default:c(()=>[v(" mdi-plus ")]),_:1})]),_:1},8,["modelValue"])]),t("div",de,[t("p",{class:b(L.value==1?"redBg":""),onClick:e[7]||(e[7]=n=>A(4,1))}," 1/4 ",2),t("p",{class:b(L.value==2?"redBg":""),onClick:e[8]||(e[8]=n=>A(3,2))}," 1/3 ",2),t("p",{class:b(L.value==3?"redBg":""),onClick:e[9]||(e[9]=n=>A(2,3))}," 1/2 ",2),t("p",{class:b(L.value==4?"redBg":""),onClick:e[10]||(e[10]=n=>A(1,4))}," 全仓 ",2)]),t("div",ue,[t("p",null,[v(" 交易额"),t("span",ce,o(f.amount),1)]),t("p",null,[v(" 可买股数"),t("span",_e,o(f.limit),1)])])])):g("",!0),D.value==1?(r(),d("div",pe,[u(et,{label:"请选择股票",modelValue:T.value,"onUpdate:modelValue":[e[11]||(e[11]=n=>T.value=n),dt],items:i(s).state.trading.active_list,"item-title":"title","item-value":"id",variant:"underlined"},{item:c(({props:n,item:_})=>[u(ot,Vt(n,{subtitle:_.raw.number+"/"+_.raw.unrealized_profit}),null,16,["subtitle"])]),_:1},8,["modelValue","items"]),u(j,{block:"",class:"mt-4",color:"success",onClick:pt},{default:c(()=>[v("卖出")]),_:1})])):g("",!0)]),t("div",me,[u(lt,{"show-arrows":!1,"hide-delimiters":"",modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=n=>$.value=n),height:"auto"},{default:c(()=>[(r(),d(k,null,y(2,(n,_)=>u(at,{key:_},{default:c(()=>[_==0?(r(),d("div",ve,[t("div",null,[(r(!0),d(k,null,y(F.sell,(a,x)=>(r(),d("div",{class:"flexBetween records-list",key:x},[t("p",null,"卖"+o(x+1),1),t("p",he,o(a.price),1),t("p",null,o(a.vol),1)]))),128)),fe,(r(!0),d(k,null,y(F.buy,(a,x)=>(r(),d("div",{class:"flexBetween records-list",key:x},[t("p",null,"买"+o(x+1),1),t("p",ge,o(a.price),1),t("p",null,o(a.vol),1)]))),128))])])):g("",!0),_==1?(r(),d("div",ke,[ye,(r(!0),d(k,null,y(P.value,(a,x)=>(r(),d("div",{key:x,class:"flexBetween records-list pr-2"},[t("p",null,o(kt(a.date)),1),t("p",be,o(a.price),1),t("p",null,o(a.limit),1)]))),128))])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"])])]),t("div",xe,[D.value==0?(r(),Z(j,{key:0,class:"sure-btn",onClick:mt},{default:c(()=>[v("交易")]),_:1})):g("",!0),t("div",we,[t("p",{class:b($.value==0?"roseColor":""),onClick:e[13]||(e[13]=n=>$.value=0)},"+档",2),t("p",{class:b($.value==1?"roseColor":""),onClick:e[14]||(e[14]=n=>$.value=1)},"明细",2)])]),Ve,t("div",Ce,[t("p",{class:b(B.value==0?"active-tab":""),onClick:e[15]||(e[15]=n=>B.value=0)}," 持仓 ",2),t("p",{class:b(B.value==1?"active-tab":""),onClick:e[16]||(e[16]=n=>B.value=1)}," 订单 ",2)]),u(lt,{"show-arrows":!1,"hide-delimiters":"",modelValue:B.value,"onUpdate:modelValue":e[21]||(e[21]=n=>B.value=n),height:"auto"},{default:c(()=>[(r(),d(k,null,y(2,(n,_)=>u(at,{key:_},{default:c(()=>[_==0?(r(),d("div",Be,[t("table",null,[t("tbody",null,[$e,Se,(r(!0),d(k,null,y(i(s).state.trading.active_list,a=>(r(),d("tr",{class:"tr-list",key:a.code},[t("td",Le,[t("p",null,o(a.title),1),t("span",null,o(a.code),1)]),t("td",Te,[t("div",Ie,o(a.cost),1)]),t("td",Ue,[t("span",null,o(a.number),1)]),t("td",Fe,[t("p",null,o(i(Ct)(a.price,a.sell,a.number_ret)),1)]),t("th",Ne,[u(j,{variant:"outlined",color:"red",to:"/Sell?order_id="+a.id,size:"x-small"},{default:c(()=>[v(" 卖出 ")]),_:2},1032,["to"])])]))),128))])])])):g("",!0),_==1?(r(),d("div",qe,[t("div",Ae,[u(Mt,{modelValue:S.value,"onUpdate:modelValue":e[20]||(e[20]=a=>S.value=a),"bg-color":"white",color:"black","align-tabs":"left"},{default:c(()=>[u(H,{onClick:e[17]||(e[17]=a=>E(0))},{default:c(()=>[v("待成交")]),_:1}),u(H,{onClick:e[18]||(e[18]=a=>E(1))},{default:c(()=>[v("已成交")]),_:1}),u(H,{onClick:e[19]||(e[19]=a=>E(2))},{default:c(()=>[v("已撤单")]),_:1})]),_:1},8,["modelValue"])]),t("table",null,[S.value==0?(r(),d("tbody",De,[Oe,ze,(r(!0),d(k,null,y(i(s).state.trading.trust_list,a=>(r(),d("tr",{class:"tr-list",key:a.code},[t("td",Ee,[t("p",null,o(a.title),1),t("span",null,o(a.code),1)]),t("td",Me,[t("div",Re,o(a.buy_price),1)]),t("td",je,[t("span",null,o(a.number)+"/委托",1)]),t("td",He,[t("p",null,o(a.date),1)]),t("th",{onClick:x=>_t(a.id)},"撤销",8,Pe)]))),128))])):g("",!0),S.value==1?(r(),d("tbody",Ge,[Ke,Qe,(r(!0),d(k,null,y(i(s).state.trading.success_list,a=>(r(),d("tr",{class:"tr-list",key:a.symbol_code},[t("td",Ye,[t("p",null,o(a.title),1),t("span",null,o(a.symbol_code),1)]),t("td",Je,[t("div",We,o(a.amount),1)]),t("td",Xe,[t("span",null,o(a.number)+"/"+o(a.type_string),1)]),t("td",Ze,[t("p",null,o(a.date),1)])]))),128))])):g("",!0),S.value==2?(r(),d("tbody",ts,[es,ss,(r(!0),d(k,null,y(i(s).state.trading.trust_list,a=>(r(),d("tr",{class:"tr-list",key:a.code},[t("td",ls,[t("p",null,o(a.title),1),t("span",null,o(a.code),1)]),t("td",as,[t("div",os,o(a.buy_price),1)]),t("td",ns,[t("span",null,o(a.number)+"/委托",1)]),t("td",is,[t("p",null,o(a.date),1)])]))),128))])):g("",!0)])])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"]),u(i(Rt),{modelValue:I.value,"onUpdate:modelValue":e[23]||(e[23]=n=>I.value=n)},{default:c(()=>[u(zt,{class:"pb-5"},{default:c(()=>[t("div",rs,[ds,t("img",{src:At,alt:"",onClick:e[22]||(e[22]=n=>I.value=!1)})]),(r(!0),d(k,null,y(i(s).state.contract.minList,(n,_)=>(r(),Z(ot,{class:"flexCenter",key:n.order_id,onClick:a=>{I.value=!1,gt(_)}},{default:c(()=>[t("div",us,[u(Et,null,{default:c(()=>[t("h3",null,[v(o(n.contract_type_title+n.contract_limit_limit)+"倍- ",1),t("span",null,o(n.balance),1),v("元 ")]),t("p",null,"合约号:"+o(n.order_id),1)]),_:2},1024),W(t("img",cs,null,512),[[X,_==Q.value]])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]))}},Os=Ot(_s,[["__scopeId","data-v-78e0638e"]]);export{Os as default};
