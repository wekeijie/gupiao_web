import{M as $t,N as St,z as p,ad as et,a2 as Lt,O as Tt,P as s,aA as Ft,aB as Ut,Z as C,A as i,Q as c,x as u,C as _,I as t,S as r,W as n,F as f,Y as b,af as st,ag as lt,_ as g,D as K,B as ot,aj as Nt,E as at,az as Ot,U as k,X as y,ai as qt,G as At,H as Dt}from"./index-d5ab4c08.js";import{_ as Mt}from"./refresh-9fe172ae.js";import{_ as Pt,M as zt,a as Et,b as jt,c as Ht}from"./MarqueeText.common-8e021180.js";import{_ as Rt}from"./rightImg-2896a6bb.js";import{_ as Gt}from"./search-e322bae4.js";import{_ as Kt}from"./close-d0614903.js";import{P as Qt}from"./topWrap-c6d89e4e.js";import{_ as Wt}from"./_plugin-vue_export-helper-c27b6911.js";import{V as nt}from"./VSelect-93dc97ab.js";import{V as rt}from"./VTextField-cbb98f05.js";import{V as it,a as ct}from"./VCarouselItem-26d7a2cb.js";import{V as dt,a as Xt,b as Yt}from"./VList-a333d435.js";import{V as Zt,a as Q}from"./VTabs-53dab6b8.js";import{V as Jt}from"./VBottomSheet-a24bdf55.js";import"./_commonjsHelpers-de833af9.js";/* empty css                                                                */import"./VInput-8e6ea740.js";import"./index-b07592df.js";import"./VVirtualScroll-cc184190.js";import"./VCheckboxBtn-48fc421e.js";import"./VSelectionControl-070daabf.js";import"./VChip-695219a2.js";import"./VWindowItem-7cebe430.js";import"./ssrBoot-1ac2cad7.js";import"./VDivider-f0a7b2d3.js";const m=U=>(At("data-v-1e73c053"),U=U(),Dt(),U),te={class:"hores-race-lamp flexStart"},ee=m(()=>t("img",{src:Et,alt:"",class:"refresh-data"},null,-1)),se=m(()=>t("span",{style:{color:"#f90"}}," 该平台可以直接扩大股票配资客户的交易资金，使股票配资客户获得充裕的资金，成本低，盈利100%属于用户。",-1)),le={class:"row-tab-box flexBetween"},oe=m(()=>t("h2",{class:"active-text-color"},"合约",-1)),ae=m(()=>t("img",{src:Rt,alt:"",class:"img-right"},null,-1)),ne={class:"row-tab-box flexBetween"},re=m(()=>t("h2",{class:"active-text-color"},"股票名称/代码",-1)),ie={class:"flexEnd"},ce={class:"flexBetween new-title-box"},de={key:1},ue=m(()=>t("img",{src:jt,alt:"",class:"img-right"},null,-1)),_e={class:"flexBetween controls-box"},pe={style:{},class:"controls-left"},fe=m(()=>t("div",{class:"flexBetween buy-sell-box"},[t("p",{class:"buy-box"},"买入")],-1)),me={key:0,class:"buy"},ve={class:"up-down-number flexBetween"},he={class:"roseColor"},ge={class:"fallColor"},ke={class:"input-box",style:{"margin-top":"15px"}},ye={class:"component-box flexBetween"},be={class:"up-down-number flexBetween"},xe={class:"roseColor"},we={class:"fallColor"},Ce={key:1,class:"sell py-10"},Ve={class:"controls-right"},Be={key:0,class:"new-box"},Ie={class:"fallColor"},$e=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px",margin:"5px 0"}},null,-1)),Se={class:"pinkColor"},Le={key:1,class:"new-box"},Te=m(()=>t("div",{class:"flexBetween records-list pr-2"},[t("p",null,"时间"),t("p",null,"价格"),t("p",null,"量")],-1)),Fe={class:"pinkColor"},Ue={class:"flexAroud"},Ne={class:"flexCenter cut-detail"},Oe=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"5px",margin:"10px 0"}},null,-1)),qe={class:"table-box flexStart"},Ae={key:0,class:"new-box"},De=m(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|市值"),t("th",{style:{"text-align":"right"}},"现价|成本"),t("th",{style:{"text-align":"right"}},"可用|持仓"),t("th",{style:{"text-align":"right"},class:"cutUp"},"浮动|盈亏"),t("th",{style:{"text-align":"right"},class:"cutUp"},"操作")],-1)),Me=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Pe={class:"tr-one"},ze={class:"tr-two text-right"},Ee={class:"tr-two-number"},je={class:"tr-three",style:{"text-align":"right"}},He={key:0},Re={key:1},Ge={class:"tr-four",style:{"text-align":"right"}},Ke={class:"text-right"},Qe={key:1,class:"new-box"},We={class:"tab-box"},Xe={key:0},Ye=m(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间"),t("th",null,"操作")],-1)),Ze=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),Je={class:"tr-one"},ts={class:"tr-two",style:{"text-align":"right"}},es={class:"tr-two-number"},ss={class:"tr-three",style:{"text-align":"right"}},ls={class:"tr-four",style:{"text-align":"right"}},os=["onClick"],as={key:1},ns=m(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"金额"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),rs=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),is={class:"tr-one"},cs={class:"tr-two",style:{"text-align":"right"}},ds={class:"tr-two-number"},us={class:"tr-three",style:{"text-align":"right"}},_s={class:"tr-four",style:{"text-align":"right"}},ps={key:2},fs=m(()=>t("tr",{class:"tr-list"},[t("th",{style:{"text-align":"left"}},"名称|代码"),t("th",{style:{"text-align":"right"}},"价格"),t("th",{style:{"text-align":"right"}},"数量|类型"),t("th",{style:{"text-align":"right"},class:"cutUp"},"时间")],-1)),ms=m(()=>t("div",{style:{"background-color":"rgb(245, 245, 245)",height:"2px"}},null,-1)),vs={class:"tr-one"},hs={class:"tr-two",style:{"text-align":"right"}},gs={class:"tr-two-number"},ks={class:"tr-three",style:{"text-align":"right"}},ys={class:"tr-four",style:{"text-align":"right"}},bs={class:"flexBetween sheet-top"},xs={class:"sheet-sure"},ws={class:"flexBetween type-list"},Cs={class:"list-select",src:Ht,alt:""},Vs={__name:"Trading",setup(U){const D=$t(),x=St(),v=p(0),S=p(1),V=p(0),I=p(0),$=p(0),M=p(0),L=p(null),P=p(""),T=p(!1);p(!1),p("");const h=et({amount:0,limit:0,order_id:""}),B=p("0.000001"),z=p("平安银行"),ut=p("000001"),E=p(""),F=et({buy:[],sell:[]}),N=p("market_price"),_t=[{title:"市价交易",key:"market_price"},{title:"限价委托",key:"limit_price"}],j=p([]),W=p(0);Lt(v,(l,e)=>{let a=C(s.state.market.stock_new_info.f43,s.state.market.stock_new_info.f59)*l;W.value=a.toFixed(2)}),Tt(()=>{x.query.code&&(ut.value=x.query.code),x.query.contractOrderId&&(E.value=x.query.contractOrderId),x.query.prefix?B.value=x.query.prefix:B.value=s.state.trading.prefix,x.query.title?z.value=x.query.title:z.value=s.state.trading.title,mt(),s.getters.token?(X(),console.log("updateNewControactList")):G.value="请登录选择合约",ht(),R(),O(0)});const pt=(l,e)=>l.findIndex(a=>a.order_id===e),X=()=>{s.dispatch("contract/getMinList").then(l=>{if(E.value){const e=pt(l,E.value);e!==-1&&A(e)}else{let e=Ft();e>=0&&A(e)}})},ft=(l,e)=>((e-l)/l*100).toFixed(2),mt=()=>{s.state.market.stock_new_info.f107+"."+s.state.market.stock_new_info.f57!=B.value&&s.dispatch("market/getStockNewInfo",B.value),s.state.market.stock_new_info.f107<2&&s.dispatch("market/getBuySellFive",B.value).then(e=>{F.buy=e.buy,F.sell=e.sell})},H=l=>{$.value=l,l==0||l==2?(s.commit("trading/clearTrustList"),O(l)):l==1&&Y()},vt=()=>{console.log(L.value)},R=()=>{s.dispatch("trading/getActiveList")},ht=async()=>{const l=await s.dispatch("market/getStockFenShi",B.value);j.value=gt(l),j.value.reverse()},gt=l=>l.map(a=>{const d=a.split(",");return{date:d[0],price:parseFloat(d[1]),limit:parseInt(d[2],10)}}),Y=()=>{s.dispatch("trading/getSuccessList")},kt=l=>{s.dispatch("trading/cancelOrder",l).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"取消成功！"}),O(0),X()})},yt=()=>{if(!L.value){s.dispatch("snackbar/warning",{active:!0,body:"请选择订单！"});return}s.dispatch("trading/sell",{key:L.value}).then(()=>{s.dispatch("snackbar/success",{active:!0,body:"Success"}),R(),Y()})},Z=l=>{if(l=="a"&&(v.value=v.value+100),l=="c"&&v.value>0){let e=v.value-100;e>0?v.value=e:v.value=0}},bt=()=>{if(!s.getters.token){s.dispatch("snackbar/warning",{active:!0,body:"请登录！"});return}if(h.order_id==""){s.dispatch("snackbar/warning",{active:!0,body:"请选择合约！"});return}const l={symbol:B.value,number:v.value,contract:h.order_id,type:N.value,title:z.value,price:P.value};if(l.number<100&&l.number%100!==0){s.dispatch("snackbar/warning",{active:!0,body:"数量必须是100的倍数"});return}s.dispatch("trading/buy",l).then(e=>{s.dispatch("snackbar/success",{active:!0,body:"购买成功"}),s.dispatch("contract/getMinList").then(()=>{A(V.value)}),R(),O(0)})},xt=l=>{D.push(l)},O=l=>{s.dispatch("trading/getTrustList",l)},q=(l,e)=>{if(h.limit<=0)return!1;let a=Math.floor(h.limit/l);if(a>=100){let d=wt(a);d>h.limit?v.value=d-100:v.value=d}else v.value=100;S.value=e},wt=l=>{const e=l%100;return e===0?l:l+(100-e)},Ct=l=>{if(l<0)return"green";if(l===0||l==="")return"black";if(l>0)return"red"},G=p("请选择合约"),J=p(0),A=l=>{J.value=l,Ut(l),G.value=s.state.contract.minList[l].contract_type_title+s.state.contract.minList[l].contract_limit_limit+"倍",h.amount=s.state.contract.minList[l].balance,h.limit=parseFloat(h.amount/C(s.state.market.stock_new_info.f43,s.state.market.stock_new_info.f59)).toFixed(2),h.order_id=s.state.contract.minList[l].order_id},Vt=l=>(l=l.toString(),l.replace(/(\d{2})(\d{2})(\d{2})/,"$1:$2")),tt=l=>l>0?"+"+l:l,Bt=(l,e,a,d)=>{D.push({path:l,query:{code:a,title:e,prefix:d}})},It=()=>{window.location.reload()};return(l,e)=>(i(),c("div",null,[u(Qt,null,{headerCenter:_(()=>[f("交易")]),headerRight:_(()=>[t("img",{src:Mt,alt:"",class:"refresh-data",onClick:It})]),_:1}),t("div",te,[ee,u(r(zt),{repeat:1},{default:_(()=>[se]),_:1})]),t("div",le,[oe,t("div",{class:"flexEnd",onClick:e[0]||(e[0]=a=>T.value=!0)},[t("p",null,n(G.value),1),ae])]),t("div",ne,[re,t("div",ie,[t("p",null,[f(n(r(s).state.market.stock_new_info.f58),1),t("span",null,"("+n(r(Nt)(r(s).state.market.stock_new_info.f57,r(s).state.market.stock_new_info.f107))+")",1)]),t("img",{src:Gt,alt:"",class:"img-search",onClick:e[1]||(e[1]=a=>xt("/Search"))})])]),t("div",ce,[t("p",null,[f(" 最新 "),r(s).state.market.stock_new_info.f169!="-"?(i(),c("span",{key:0,class:b("text-"+Ct(r(C)(r(s).state.market.stock_new_info.f169,r(s).state.market.stock_new_info.f59)))},n(r(C)(r(s).state.market.stock_new_info.f43,r(s).state.market.stock_new_info.f59))+" "+n(tt(r(C)(r(s).state.market.stock_new_info.f169,r(s).state.market.stock_new_info.f59)))+" "+n(tt(r(C)(r(s).state.market.stock_new_info.f170,r(s).state.market.stock_new_info.f59))+"%"),3)):(i(),c("span",de,n(r(s).state.market.stock_new_info.f43)+" "+n(r(s).state.market.stock_new_info.f169)+" "+n(r(s).state.market.stock_new_info.f170),1))]),t("div",null,[t("img",{src:Pt,alt:"",onClick:e[2]||(e[2]=a=>Bt("/ChanrtPage",r(s).state.market.stock_new_info.f58,r(s).state.market.stock_new_info.f57,r(s).state.market.stock_new_info.f107)),class:"img-right"}),ue])]),t("div",_e,[t("div",pe,[fe,M.value==0?(i(),c("div",me,[u(nt,{label:"类型",items:_t,"item-title":"title","item-value":"key",modelValue:N.value,"onUpdate:modelValue":e[3]||(e[3]=a=>N.value=a),variant:"solo-filled","hide-details":"",class:"mt-2"},null,8,["modelValue"]),t("div",ve,[t("p",null,[f(" 涨停"),t("span",he,n(r(C)(r(s).state.market.stock_new_info.f51,r(s).state.market.stock_new_info.f59)),1)]),t("p",null,[f(" 跌停"),t("span",ge,n(r(C)(r(s).state.market.stock_new_info.f52,r(s).state.market.stock_new_info.f59)),1)])]),t("div",ke,[st(u(rt,{type:"string",modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=a=>P.value=a),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":"",label:"价格"},null,8,["modelValue"]),[[lt,N.value=="limit_price"]]),u(rt,{type:"number",modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=a=>v.value=a),placeholder:"请输入数值",clearable:"",disabled:!1,density:"default",variant:"outlined","single-line":"","hide-details":""},{append:_(()=>[u(at,{color:"black",onClick:e[5]||(e[5]=a=>Z("c")),class:"down-num"},{default:_(()=>[f(" mdi-minus ")]),_:1}),u(at,{color:"black",onClick:e[6]||(e[6]=a=>Z("a")),class:"up-num"},{default:_(()=>[f(" mdi-plus ")]),_:1})]),_:1},8,["modelValue"])]),t("div",ye,[t("p",{class:b(S.value==1?"redBg":""),onClick:e[8]||(e[8]=a=>q(4,1))}," 1/4 ",2),t("p",{class:b(S.value==2?"redBg":""),onClick:e[9]||(e[9]=a=>q(3,2))}," 1/3 ",2),t("p",{class:b(S.value==3?"redBg":""),onClick:e[10]||(e[10]=a=>q(2,3))}," 1/2 ",2),t("p",{class:b(S.value==4?"redBg":""),onClick:e[11]||(e[11]=a=>q(1,4))}," 全仓 ",2)]),t("div",be,[t("p",null,[f(" 交易额"),t("span",xe,n(W.value),1)]),t("p",null,[f(" 可买股数"),t("span",we,n(h.limit),1)])])])):g("",!0),M.value==1?(i(),c("div",Ce,[u(nt,{label:"请选择股票",modelValue:L.value,"onUpdate:modelValue":[e[12]||(e[12]=a=>L.value=a),vt],items:r(s).state.trading.active_list,"item-title":"title","item-value":"id",variant:"underlined"},{item:_(({props:a,item:d})=>[u(dt,Ot(a,{subtitle:d.raw.number+"/"+d.raw.unrealized_profit}),null,16,["subtitle"])]),_:1},8,["modelValue","items"]),u(K,{block:"",class:"mt-4",color:"success",onClick:yt},{default:_(()=>[f("卖出")]),_:1})])):g("",!0)]),t("div",Ve,[u(it,{"show-arrows":!1,"hide-delimiters":"",modelValue:I.value,"onUpdate:modelValue":e[13]||(e[13]=a=>I.value=a),height:"auto"},{default:_(()=>[(i(),c(k,null,y(2,(a,d)=>u(ct,{key:d},{default:_(()=>[d==0?(i(),c("div",Be,[t("div",null,[(i(!0),c(k,null,y(F.sell,(o,w)=>(i(),c("div",{class:"flexBetween records-list",key:w},[t("p",null,"卖"+n(F.sell.length-w),1),t("p",Ie,n(o.price),1),t("p",null,n(o.vol),1)]))),128)),$e,(i(!0),c(k,null,y(F.buy,(o,w)=>(i(),c("div",{class:"flexBetween records-list",key:w},[t("p",null,"买"+n(w+1),1),t("p",Se,n(o.price),1),t("p",null,n(o.vol),1)]))),128))])])):g("",!0),d==1?(i(),c("div",Le,[Te,(i(!0),c(k,null,y(j.value,(o,w)=>(i(),c("div",{key:w,class:"flexBetween records-list pr-2"},[t("p",null,n(Vt(o.date)),1),t("p",Fe,n(o.price),1),t("p",null,n(o.limit),1)]))),128))])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"])])]),t("div",Ue,[M.value==0?(i(),ot(K,{key:0,class:"sure-btn",onClick:bt},{default:_(()=>[f("交易")]),_:1})):g("",!0),t("div",Ne,[t("p",{class:b(I.value==0?"roseColor":""),onClick:e[14]||(e[14]=a=>I.value=0)},"+档",2),t("p",{class:b(I.value==1?"roseColor":""),onClick:e[15]||(e[15]=a=>I.value=1)},"明细",2)])]),Oe,t("div",qe,[t("p",{class:b(V.value==0?"active-tab":""),onClick:e[16]||(e[16]=a=>V.value=0)}," 持仓 ",2),t("p",{class:b(V.value==1?"active-tab":""),onClick:e[17]||(e[17]=a=>V.value=1)}," 订单 ",2)]),u(it,{"show-arrows":!1,"hide-delimiters":"",modelValue:V.value,"onUpdate:modelValue":e[22]||(e[22]=a=>V.value=a),height:"auto"},{default:_(()=>[(i(),c(k,null,y(2,(a,d)=>u(ct,{key:d},{default:_(()=>[d==0?(i(),c("div",Ae,[t("table",null,[t("tbody",null,[De,Me,(i(!0),c(k,null,y(r(s).state.trading.active_list,o=>(i(),c("tr",{class:"tr-list",key:o.code},[t("td",Pe,[t("p",null,n(o.title),1),t("span",null,n((parseFloat(o.sell)*o.number).toFixed(2)),1)]),t("td",ze,[t("div",Ee,n(o.sell),1),t("span",null,n(o.price),1)]),t("td",je,[o.active?(i(),c("div",He,"0")):(i(),c("div",Re,n(o.number),1)),t("span",null,n(o.number),1)]),t("td",Ge,[t("div",null,n(r(qt)(o.price,o.sell,o.number)),1),t("span",null,n(ft(o.price,o.sell))+" %",1)]),t("th",Ke,[u(K,{variant:"outlined",color:"red",to:"/Sell?order_id="+o.id,size:"x-small"},{default:_(()=>[f(" 卖出 ")]),_:2},1032,["to"])])]))),128))])])])):g("",!0),d==1?(i(),c("div",Qe,[t("div",We,[u(Zt,{modelValue:$.value,"onUpdate:modelValue":e[21]||(e[21]=o=>$.value=o),"bg-color":"white",color:"black","align-tabs":"left"},{default:_(()=>[u(Q,{onClick:e[18]||(e[18]=o=>H(0))},{default:_(()=>[f("待成交")]),_:1}),u(Q,{onClick:e[19]||(e[19]=o=>H(1))},{default:_(()=>[f("已成交")]),_:1}),u(Q,{onClick:e[20]||(e[20]=o=>H(2))},{default:_(()=>[f("已撤单")]),_:1})]),_:1},8,["modelValue"])]),t("table",null,[$.value==0?(i(),c("tbody",Xe,[Ye,Ze,(i(!0),c(k,null,y(r(s).state.trading.trust_list,o=>(i(),c("tr",{class:"tr-list",key:o.code},[t("td",Je,[t("p",null,n(o.title),1),t("span",null,n(o.code),1)]),t("td",ts,[t("div",es,n(o.buy_price),1)]),t("td",ss,[t("span",null,n(o.number)+"/委托",1)]),t("td",ls,[t("p",null,n(o.date),1)]),t("th",{onClick:w=>kt(o.id)},"撤销",8,os)]))),128))])):g("",!0),$.value==1?(i(),c("tbody",as,[ns,rs,(i(!0),c(k,null,y(r(s).state.trading.success_list,o=>(i(),c("tr",{class:"tr-list",key:o.symbol_code},[t("td",is,[t("p",null,n(o.title),1),t("span",null,n(o.symbol_code),1)]),t("td",cs,[t("div",ds,n(o.amount_f),1)]),t("td",us,[t("span",null,n(o.number)+"/"+n(o.type_string),1)]),t("td",_s,[t("p",null,n(o.date),1)])]))),128))])):g("",!0),$.value==2?(i(),c("tbody",ps,[fs,ms,(i(!0),c(k,null,y(r(s).state.trading.trust_list,o=>(i(),c("tr",{class:"tr-list",key:o.code},[t("td",vs,[t("p",null,n(o.title),1),t("span",null,n(o.code),1)]),t("td",hs,[t("div",gs,n(o.buy_price),1)]),t("td",ks,[t("span",null,n(o.number)+"/委托",1)]),t("td",ys,[t("p",null,n(o.date),1)])]))),128))])):g("",!0)])])):g("",!0)]),_:2},1024)),64))]),_:1},8,["modelValue"]),u(r(Jt),{modelValue:T.value,"onUpdate:modelValue":e[25]||(e[25]=a=>T.value=a)},{default:_(()=>[u(Xt,{class:"pb-5"},{default:_(()=>[t("div",bs,[t("div",xs,[f(" 请选择您的合约"),t("span",{onClick:e[23]||(e[23]=a=>r(D).push("/contract"))},"[新开合约]")]),t("img",{src:Kt,alt:"",onClick:e[24]||(e[24]=a=>T.value=!1)})]),(i(!0),c(k,null,y(r(s).state.contract.minList,(a,d)=>(i(),ot(dt,{class:"flexCenter",key:a.order_id,onClick:o=>{T.value=!1,A(d)}},{default:_(()=>[t("div",ws,[u(Yt,null,{default:_(()=>[t("h3",null,[f(n(a.contract_type_title+a.contract_limit_limit)+"倍- ",1),t("span",null,n(a.balance),1),f("元 ")]),t("p",null,"合约号:"+n(a.order_id),1)]),_:2},1024),st(t("img",Cs,null,512),[[lt,d==J.value]])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]))}},Ys=Wt(Vs,[["__scopeId","data-v-1e73c053"]]);export{Ys as default};
