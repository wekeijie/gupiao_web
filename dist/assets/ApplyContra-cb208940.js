import{L as H,z as _,ac as N,O as P,P as u,A as v,Q as V,x as t,C as e,I as i,D as k,R as x,S as R,T as C,F as a,E as S,ah as F,cl as M,Y as c,U as A,B,ad as G,Z as O,X as Q,_ as X,$ as Y,G as Z,H as j}from"./index-328f9261.js";import{P as q}from"./topWrap-4a6af669.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f}from"./VRow-9c1e2d48.js";import{V as T}from"./VSheet-7e11e09f.js";import{V as l}from"./VCol-74c277f6.js";import{V as K}from"./VDivider-d24d7465.js";import{a as W,c as tt,V as et}from"./VList-52ff3cf9.js";import{V as at}from"./VBottomSheet-383ceb9d.js";/* empty css                                                                */import"./index-bc2a4995.js";import"./ssrBoot-0e06b97c.js";const D=h=>(Z("data-v-a168520d"),h=h(),j(),h),lt={class:"bg-color ui-min-height"},st={class:"topup-bg"},ot={class:"px-3 pt-10"},ct={class:"px-3 mt-n16"},dt={class:"text-red"},ut=D(()=>i("div",{class:"text-body-1 mb-3"},"请选择申请额度",-1)),nt={class:"text-h6"},it={class:"text-body-2"},rt=D(()=>i("span",{class:"text-h6"},"合约详情",-1)),pt={__name:"ApplyContra",setup(h){const E=H();_();const g=_(!1),m=_({title:"",day:""}),p=_({}),w=_(0),n=_(500),y=_(!1),o=N({total:0,expand:0,loss_waring:0,loss_fail:0,rate:0});P(()=>{u.dispatch("user/userInfo"),u.dispatch("contract/getType").then(()=>{I(u.state.contract.typeList[0])})});const $=()=>{const r={amount:n.value,type_id:m.value.id,limit_id:p.value.id};u.dispatch("contract/create",r).then(()=>{u.dispatch("snackbar/success",{active:!0,body:"Success"}),y.value=!1,E.push("/contract")})},I=r=>{m.value=r,U(r.id),g.value=!1},U=r=>{u.dispatch("contract/getLimit",r).then(()=>{L(0)})},L=(r,d)=>{w.value=d,p.value=r},z=()=>{if(n.value>u.state.user.info.balance){u.dispatch("snackbar/warning",{active:!0,body:"保证金不足，请存款！"});return}console.log(p),o.expand=n.value*p.value.limit,o.total=o.expand+n.value,o.loss_waring=o.expand+n.value*.5,o.loss_fail=o.expand+n.value*.2,o.rate=o.expand*(p.value.rate/100),console.log(123),console.log(o),y.value=!0};return(r,d)=>(v(),V(C,null,[t(q,null,{headerCenter:e(()=>[a("申请合约")]),_:1}),i("div",lt,[i("div",st,[i("div",ot,[t(f,{class:"ma-0 pa-0 border-bottom-line"},{default:e(()=>[t(l,{class:"px-0",cols:"1"},{default:e(()=>[t(S,{color:"white"},{default:e(()=>[a("mdi-currency-cny")]),_:1})]),_:1}),t(l,{cols:"11"},{default:e(()=>[F(i("input",{type:"number",class:"amount",placeholder:"请输入保证金金额","onUpdate:modelValue":d[0]||(d[0]=s=>n.value=s)},null,512),[[M,n.value]])]),_:1})]),_:1})])]),i("div",ct,[t(T,{class:"bg-white rounded-lg py-3"},{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("钱包可用余额")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right"},{default:e(()=>[a("¥"+c(x(u).state.user.info.balance),1)]),_:1})]),_:1}),t(K),t(f,{class:"ma-0 pa-0 mt-2"},{default:e(()=>[t(l,{cols:"6",class:"text-body-1"},{default:e(()=>[a("合约类型")]),_:1}),t(l,{cols:"6",class:"text-body-1 text-right",onClick:d[1]||(d[1]=s=>g.value=!0)},{default:e(()=>[i("span",dt,c(m.value.title+"-操盘"+m.value.day+"天"),1),t(S,{size:"large",color:"#8E8E8E"},{default:e(()=>[a("mdi-chevron-right")]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{class:"bg-white rounded-lg py-3 mt-3 px-3"},{default:e(()=>[ut,t(f,{class:"ma-0 pa-0"},{default:e(()=>[(v(!0),V(C,null,A(x(u).state.contract.limitList,(s,b)=>(v(),B(l,{cols:"3",class:G(["text-center list-bg border-line rounded-lg mr-7 mb-3",{"active-style":w.value==b}]),key:s.title,onClick:_t=>L(s,b)},{default:e(()=>[i("div",nt,c(s.title),1),i("div",it,c(s.limit*n.value),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])]),t(k,{block:"",color:"#445CED",class:"text-white rounded-0 py-7 text-h6 fixed",style:{bottom:"0px"},onClick:z},{default:e(()=>[a("立即申请")]),_:1}),t(x(at),{modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=s=>g.value=s)},{default:e(()=>[t(W,null,{default:e(()=>[t(tt,{class:"w-100"},{default:e(()=>[a(" 选择合约类型 ")]),_:1}),(v(!0),V(C,null,A(x(u).state.contract.typeList,s=>(v(),B(et,{key:s.title,title:s.title+s.day+"天",onClick:b=>I(s)},null,8,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(R,{modelValue:y.value,"onUpdate:modelValue":d[4]||(d[4]=s=>y.value=s),persistent:"",width:"1024"},{default:e(()=>[t(O,null,{default:e(()=>[t(Q,null,{default:e(()=>[rt]),_:1}),t(X,null,{default:e(()=>[t(f,{class:"mx-0 pa-0 text-body-1 text-grey-darken-1"},{default:e(()=>[t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("总操盘资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.total),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("保证金/本金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(n.value),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("配资资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand)+"/"+c(p.value.limit),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损预警线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_waring),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("亏损平仓线")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.loss_fail),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("利率")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(p.value.rate+"%"),1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("产生利息")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.rate)+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("资金使用时间")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(m.value.day)+"天后自动续期",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("可用利息券")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(x(u).state.user.info.interest_amount)+"元",1)]),_:1}),t(l,{cols:"6",class:"py-1"},{default:e(()=>[a("准备资金")]),_:1}),t(l,{cols:"6",class:"py-1 text-right"},{default:e(()=>[a(c(o.expand),1)]),_:1})]),_:1})]),_:1}),t(Y,null,{default:e(()=>[t(f,{class:"ma-0 pa-0"},{default:e(()=>[t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:d[3]||(d[3]=s=>y.value=!1)},{default:e(()=>[a(" 取消 ")]),_:1})]),_:1}),t(l,{cols:"6",class:"px-0"},{default:e(()=>[t(k,{color:"blue-darken-1",block:"",variant:"text",onClick:$},{default:e(()=>[a(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},It=J(pt,[["__scopeId","data-v-a168520d"]]);export{It as default};
