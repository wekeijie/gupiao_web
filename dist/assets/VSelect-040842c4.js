import{m as ge,V as _}from"./VTextField-4f94d19c.js";import{p as H,cN as X,de as Ve,df as ee,i as te,aw as U,dg as we,cZ as be,q as S,z as K,bp as Ce,dh as j,ac as $,bO as ke,a2 as ne,aD as F,w as le,ae as z,x as s,a9 as ae,d3 as oe,bB as Pe,cU as W,di as xe,dd as Y,a6 as Se,cB as De,cW as Te,aB as Ee,U as M,E as Z,F as Ae,dc as G,dj as J,d7 as Ie}from"./index-4a165d8b.js";import{d as Fe}from"./VInput-6ffe17b0.js";import{m as Be,u as Le,V as Re,a as Q}from"./VList-e0864c19.js";import{V as Oe}from"./VVirtualScroll-e3dedcc7.js";import{V as Ke}from"./VCheckboxBtn-81c52f0b.js";import{V as Me}from"./VChip-27520af2.js";const Ue=H({id:String,...X(Ve({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ee}}),["absolute"])},"VMenu"),He=te()({name:"VMenu",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,B){let{slots:l}=B;const c=U(e,"modelValue"),{scopeId:h}=we(),A=be(),x=S(()=>e.id||`v-menu-${A}`),t=K(),a=Ce(j,null),k=$(0);ke(j,{register(){++k.value},unregister(){--k.value},closeParents(){setTimeout(()=>{k.value||(c.value=!1,a==null||a.closeParents())},40)}});async function D(o){var y,C,T;const d=o.relatedTarget,f=o.target;await Pe(),c.value&&d!==f&&((y=t.value)!=null&&y.contentEl)&&((C=t.value)!=null&&C.globalTop)&&![document,t.value.contentEl].includes(f)&&!t.value.contentEl.contains(f)&&((T=W(t.value.contentEl)[0])==null||T.focus())}ne(c,o=>{o?(a==null||a.register(),document.addEventListener("focusin",D,{once:!0})):(a==null||a.unregister(),document.removeEventListener("focusin",D))});function r(){a==null||a.closeParents()}function g(o){var d,f,y;e.disabled||o.key==="Tab"&&(xe(W((d=t.value)==null?void 0:d.contentEl,!1),o.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(c.value=!1,(y=(f=t.value)==null?void 0:f.activatorEl)==null||y.focus()))}function p(o){var f;if(e.disabled)return;const d=(f=t.value)==null?void 0:f.contentEl;d&&c.value?o.key==="ArrowDown"?(o.preventDefault(),Y(d,"next")):o.key==="ArrowUp"&&(o.preventDefault(),Y(d,"prev")):["ArrowDown","ArrowUp"].includes(o.key)&&(c.value=!0,o.preventDefault(),setTimeout(()=>setTimeout(()=>p(o))))}const L=S(()=>F({"aria-haspopup":"menu","aria-expanded":String(c.value),"aria-owns":x.value,onKeydown:p},e.activatorProps));return le(()=>{const[o]=z.filterProps(e);return s(z,F({ref:t,class:["v-menu",e.class],style:e.style},o,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,absolute:!0,activatorProps:L.value,"onClick:outside":r,onKeydown:g},h),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return s(ae,{root:"VMenu"},{default:()=>{var C;return[(C=l.default)==null?void 0:C.call(l,...f)]}})}})}),oe({id:x,ΨopenChildren:k},t)}});function $e(e,B){const l=$(!1);let c;function h(t){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function A(){await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>{if(l.value){const a=ne(l,()=>{a(),t()})}else t()})}async function x(t){var D,r;if(t.key==="Tab"&&((D=B.value)==null||D.focus()),!["PageDown","PageUp","Home","End"].includes(t.key))return;const a=(r=e.value)==null?void 0:r.$el;if(!a)return;(t.key==="Home"||t.key==="End")&&a.scrollTo({top:t.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await A();const k=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(t.key==="PageDown"||t.key==="Home"){const g=a.getBoundingClientRect().top;for(const p of k)if(p.getBoundingClientRect().top>=g){p.focus();break}}else{const g=a.getBoundingClientRect().bottom;for(const p of[...k].reverse())if(p.getBoundingClientRect().bottom<=g){p.focus();break}}}return{onListScroll:h,onListKeydown:x}}const qe=H({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Se,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:De},itemColor:String,...Be({itemChildren:!1})},"Select"),Ne=H({...qe(),...X(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Te({transition:{component:ee}})},"VSelect"),Je=te()({name:"VSelect",props:Ne(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,B){let{slots:l}=B;const{t:c}=Ee(),h=K(),A=K(),x=U(e,"menu"),t=S({get:()=>x.value,set:n=>{var i;x.value&&!n&&((i=A.value)!=null&&i.ΨopenChildren)||(x.value=n)}}),{items:a,transformIn:k,transformOut:D}=Le(e),r=U(e,"modelValue",[],n=>k(n===null?[null]:Ie(n)),n=>{const i=D(n);return e.multiple?i:i[0]??null}),g=Fe(),p=S(()=>r.value.map(n=>a.value.find(i=>{const m=G(i.raw,e.itemValue),E=G(n.raw,e.itemValue);return m===void 0||E===void 0?!1:e.returnObject?e.valueComparator(m,E):e.valueComparator(i.value,n.value)})||n)),L=S(()=>p.value.map(n=>n.props.value)),o=$(!1),d=S(()=>t.value?e.closeText:e.openText);let f="",y;const C=S(()=>e.hideSelected?a.value.filter(n=>!p.value.some(i=>i===n)):a.value),T=S(()=>e.hideNoData&&!a.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),I=K(),{onListScroll:ue,onListKeydown:ie}=$e(I,h);function se(n){e.openOnClear&&(t.value=!0)}function ce(){T.value||(t.value=!t.value)}function re(n){var u,V;if(!n.key||e.readonly||g!=null&&g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(t.value=!0),["Escape","Tab"].includes(n.key)&&(t.value=!1),n.key==="Home"?(u=I.value)==null||u.focus("first"):n.key==="End"&&((V=I.value)==null||V.focus("last"));const i=1e3;function m(v){const P=v.key.length===1,w=!v.ctrlKey&&!v.metaKey&&!v.altKey;return P&&w}if(e.multiple||!m(n))return;const E=performance.now();E-y>i&&(f=""),f+=n.key.toLowerCase(),y=E;const O=a.value.find(v=>v.title.toLowerCase().startsWith(f));O!==void 0&&(r.value=[O])}function R(n){if(e.multiple){const i=L.value.findIndex(m=>e.valueComparator(m,n.value));if(i===-1)r.value=[...r.value,n];else{const m=[...r.value];m.splice(i,1),r.value=m}}else r.value=[n],t.value=!1}function de(n){var i;(i=I.value)!=null&&i.$el.contains(n.relatedTarget)||(t.value=!1)}function fe(){var n;o.value&&((n=h.value)==null||n.focus())}function ve(n){o.value=!0}function me(n){if(n==null)r.value=[];else if(J(h.value,":autofill")||J(h.value,":-webkit-autofill")){const i=a.value.find(m=>m.title===n);i&&R(i)}else h.value&&(h.value.value="")}return le(()=>{const n=!!(e.chips||l.chip),i=!!(!e.hideNoData||C.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=r.value.length>0,[E]=_.filterProps(e),O=m||!o.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(_,F({ref:h},E,{modelValue:r.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":me,focused:o.value,"onUpdate:focused":u=>o.value=u,validationValue:r.externalValue,dirty:m,class:["v-select",{"v-select--active-menu":t.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:O,"onClick:clear":se,"onMousedown:control":ce,onBlur:de,onKeydown:re,"aria-label":c(d.value),title:c(d.value)}),{...l,default:()=>s(M,null,[s(He,F({ref:A,modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:fe},e.menuProps),{default:()=>[i&&s(Re,{ref:I,selected:L.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ie,onFocusin:ve,onScrollPassive:ue,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var u,V,v;return[(u=l["prepend-item"])==null?void 0:u.call(l),!C.value.length&&!e.hideNoData&&(((V=l["no-data"])==null?void 0:V.call(l))??s(Q,{title:c(e.noDataText)},null)),s(Oe,{renderless:!0,items:C.value},{default:P=>{var N;let{item:w,index:b,itemRef:pe}=P;const q=F(w.props,{ref:pe,key:b,onClick:()=>R(w)});return((N=l.item)==null?void 0:N.call(l,{item:w,index:b,props:q}))??s(Q,q,{prepend:ye=>{let{isSelected:he}=ye;return s(M,null,[e.multiple&&!e.hideSelected?s(Ke,{key:w.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependIcon&&s(Z,{icon:w.props.prependIcon},null)])}})}}),(v=l["append-item"])==null?void 0:v.call(l)]}})]}),p.value.map((u,V)=>{var w;function v(b){b.stopPropagation(),b.preventDefault(),R(u)}const P={"onClick:close":v,onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:u.value,class:"v-select__selection"},[n?l.chip?s(ae,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>{var b;return[(b=l.chip)==null?void 0:b.call(l,{item:u,index:V,props:P})]}}):s(Me,F({key:"chip",closable:e.closableChips,size:"small",text:u.title},P),null):((w=l.selection)==null?void 0:w.call(l,{item:u,index:V}))??s("span",{class:"v-select__selection-text"},[u.title,e.multiple&&V<p.value.length-1&&s("span",{class:"v-select__selection-comma"},[Ae(",")])])])})]),"append-inner":function(){var P;for(var u=arguments.length,V=new Array(u),v=0;v<u;v++)V[v]=arguments[v];return s(M,null,[(P=l["append-inner"])==null?void 0:P.call(l,...V),e.menuIcon?s(Z,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),oe({isFocused:o,menu:t,select:R},h)}});export{Je as V};
