import{P as S,Q as q,A as c,R as D,S as d,dH as P,B as f,T as w,y as s,D as e,J as r,E,Y as V,G as i,W as C,F as H,aq as N,ct as U,_ as $,C as j,Z as R,$ as F,H as J,I as M}from"./index-b3cf75d5.js";import{P as z}from"./topWrap-bbacb8f6.js";import{j as G}from"./constName-c3bc78a5.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{V as T}from"./VRow-439e22e2.js";import{V as Q}from"./VSheet-2cbaaafa.js";import{V as p}from"./VCol-1c8019ff.js";/* empty css                                                                */const W=m=>(J("data-v-67a70f23"),m=m(),M(),m),Y={class:"bg-color ui-min-height"},Z={class:"topup-bg"},K={class:"px-3 pt-10"},O={class:"px-3 mt-n16"},X=W(()=>r("div",{class:"text-body-1"},"请选择充值金额",-1)),ee={__name:"AutoTopup",setup(m){const x=S(),y=q(),t=c(100),n=c({}),h=c([100,200,300,400,500,1e3]),u=c({min:0,max:0});c(""),D(async()=>{var a,l,o,_,v,b,g,k;if(!y.query.code){d.dispatch("snackbar/warning",{active:!0,body:"充值渠道不存在，请联系在线客服"});return}n.value=await P(y.query.code),(l=(a=n.value.ext)==null?void 0:a.amount_list)!=null&&l.list?(h.value=(_=(o=n.value.ext)==null?void 0:o.amount_list)==null?void 0:_.list,u.value.min=(b=(v=n.value.ext)==null?void 0:v.amount_list)==null?void 0:b.min,u.value.max=(k=(g=n.value.ext)==null?void 0:g.amount_list)==null?void 0:k.max,t.value=u.value.min):u.value.min=n.value.min});const A=()=>{if(u.value.min>0&&t.value<u.value.min){d.dispatch("snackbar/warning",{active:!0,body:"金额不能低于最低金额"});return}if(u.value.max>0&&t.value>u.value.max){d.dispatch("snackbar/warning",{active:!0,body:"金额超出本渠道的最大金额，请更换充值渠道或者联系在线客服"});return}if(n.value.id==""){I();return}d.dispatch("topUp/subPut",{amount:t.value,id:n.value.id,name:""}).then(a=>{if(a.type==0){window.open(a.url,"_blank");return}a.type==1&&B("/TopUp/unionpay",a.url)})},B=(a,l="")=>{x.push({path:a,query:{orderid:l}})},I=()=>{d.dispatch("snackbar/warning",{active:!0,body:"请选择充值渠道或联系在线客服！"})};return(a,l)=>(f(),w(V,null,[s(z,null,{headerCenter:e(()=>[i("充值")]),headerRight:e(()=>[r("p",{onClick:l[0]||(l[0]=o=>C(G)(C(x),"/Recordslist",{title:"充值审核记录"}))}," 账单 ")]),_:1}),r("div",Y,[r("div",Z,[r("div",K,[s(T,{class:"ma-0 pa-0 border-bottom-line"},{default:e(()=>[s(p,{class:"px-0",cols:"1"},{default:e(()=>[s(H,{color:"white"},{default:e(()=>[i("mdi-currency-cny")]),_:1})]),_:1}),s(p,{cols:"11"},{default:e(()=>[N(r("input",{type:"number",class:"amount",placeholder:"请输入充值金额","onUpdate:modelValue":l[1]||(l[1]=o=>t.value=o)},null,512),[[U,t.value]])]),_:1})]),_:1})])]),r("div",O,[s(Q,{class:"white rounded-lg py-4 px-3"},{default:e(()=>[X,s(T,{class:"ma-0 pa-0 mt-4"},{default:e(()=>[(f(!0),w(V,null,$(h.value,(o,_)=>(f(),j(p,{cols:"3",class:F(["mr-7 px-0 text-center rounded mb-3 border-line",{"money-bg-active":t.value===o,"money-bg":t.value!=o}]),key:_,onClick:v=>t.value=o},{default:e(()=>[i(" ¥"+R(o)+"元 ",1)]),_:2},1032,["onClick","class"]))),128)),s(p,{cols:"6",class:"pa-0 text-body-1 mt-2"},{default:e(()=>[i("应付金额")]),_:1}),s(p,{cols:"6",class:"pa-0 text-right text-body-1 text-red pr-6 mt-2"},{default:e(()=>[i("¥"+R(t.value)+"元",1)]),_:1})]),_:1})]),_:1}),s(E,{block:"",color:"#445CED",class:"text-white rounded-0 py-6 text-body-1 mt-8",style:{bottom:"0px"},onClick:A},{default:e(()=>[i("充值")]),_:1})])])],64))}},ie=L(ee,[["__scopeId","data-v-67a70f23"]]);export{ie as default};
