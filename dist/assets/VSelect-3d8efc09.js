import{m as ge,V as _}from"./VTextField-9748af8c.js";import{p as $,c$ as X,d6 as Ve,d7 as ee,i as te,at as U,d8 as we,cK as be,q as S,z as M,bm as Ce,d9 as j,ab as H,bM as ke,a1 as ne,aA as F,w as le,ag as z,x as s,a8 as ae,cS as oe,by as Pe,d4 as G,da as xe,db as W,a5 as Se,cy as De,cG as Te,ay as Ae,T as O,E as Y,F as Ee,dc as Z,dd as J,cZ as Ie}from"./index-468b4b6d.js";import{d as Fe}from"./VInput-09e2c3cc.js";import{m as Le,u as Re,a as Be,V as Q}from"./VList-6cb12801.js";import{V as Ke}from"./VVirtualScroll-162361e8.js";import{V as Me}from"./VCheckboxBtn-d5ef22c5.js";import{V as Oe}from"./VChip-0061f550.js";const Ue=$({id:String,...X(Ve({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ee}}),["absolute"])},"VMenu"),$e=te()({name:"VMenu",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,L){let{slots:l}=L;const c=U(e,"modelValue"),{scopeId:h}=we(),E=be(),x=S(()=>e.id||`v-menu-${E}`),t=M(),a=Ce(j,null),k=H(0);ke(j,{register(){++k.value},unregister(){--k.value},closeParents(){setTimeout(()=>{k.value||(c.value=!1,a==null||a.closeParents())},40)}});async function D(o){var y,C,T;const d=o.relatedTarget,f=o.target;await Pe(),c.value&&d!==f&&((y=t.value)!=null&&y.contentEl)&&((C=t.value)!=null&&C.globalTop)&&![document,t.value.contentEl].includes(f)&&!t.value.contentEl.contains(f)&&((T=G(t.value.contentEl)[0])==null||T.focus())}ne(c,o=>{o?(a==null||a.register(),document.addEventListener("focusin",D,{once:!0})):(a==null||a.unregister(),document.removeEventListener("focusin",D))});function r(){a==null||a.closeParents()}function g(o){var d,f,y;e.disabled||o.key==="Tab"&&(xe(G((d=t.value)==null?void 0:d.contentEl,!1),o.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(c.value=!1,(y=(f=t.value)==null?void 0:f.activatorEl)==null||y.focus()))}function p(o){var f;if(e.disabled)return;const d=(f=t.value)==null?void 0:f.contentEl;d&&c.value?o.key==="ArrowDown"?(o.preventDefault(),W(d,"next")):o.key==="ArrowUp"&&(o.preventDefault(),W(d,"prev")):["ArrowDown","ArrowUp"].includes(o.key)&&(c.value=!0,o.preventDefault(),setTimeout(()=>setTimeout(()=>p(o))))}const R=S(()=>F({"aria-haspopup":"menu","aria-expanded":String(c.value),"aria-owns":x.value,onKeydown:p},e.activatorProps));return le(()=>{const[o]=z.filterProps(e);return s(z,F({ref:t,class:["v-menu",e.class],style:e.style},o,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,absolute:!0,activatorProps:R.value,"onClick:outside":r,onKeydown:g},h),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return s(ae,{root:"VMenu"},{default:()=>{var C;return[(C=l.default)==null?void 0:C.call(l,...f)]}})}})}),oe({id:x,ΨopenChildren:k},t)}});function He(e,L){const l=H(!1);let c;function h(t){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function E(){await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>requestAnimationFrame(t)),await new Promise(t=>{if(l.value){const a=ne(l,()=>{a(),t()})}else t()})}async function x(t){var D,r;if(t.key==="Tab"&&((D=L.value)==null||D.focus()),!["PageDown","PageUp","Home","End"].includes(t.key))return;const a=(r=e.value)==null?void 0:r.$el;if(!a)return;(t.key==="Home"||t.key==="End")&&a.scrollTo({top:t.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await E();const k=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(t.key==="PageDown"||t.key==="Home"){const g=a.getBoundingClientRect().top;for(const p of k)if(p.getBoundingClientRect().top>=g){p.focus();break}}else{const g=a.getBoundingClientRect().bottom;for(const p of[...k].reverse())if(p.getBoundingClientRect().bottom<=g){p.focus();break}}}return{onListScroll:h,onListKeydown:x}}const qe=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Se,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:De},itemColor:String,...Le({itemChildren:!1})},"Select"),Ne=$({...qe(),...X(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Te({transition:{component:ee}})},"VSelect"),Je=te()({name:"VSelect",props:Ne(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,L){let{slots:l}=L;const{t:c}=Ae(),h=M(),E=M(),x=U(e,"menu"),t=S({get:()=>x.value,set:n=>{var i;x.value&&!n&&((i=E.value)!=null&&i.ΨopenChildren)||(x.value=n)}}),{items:a,transformIn:k,transformOut:D}=Re(e),r=U(e,"modelValue",[],n=>k(n===null?[null]:Ie(n)),n=>{const i=D(n);return e.multiple?i:i[0]??null}),g=Fe(),p=S(()=>r.value.map(n=>a.value.find(i=>{const v=Z(i.raw,e.itemValue),A=Z(n.raw,e.itemValue);return v===void 0||A===void 0?!1:e.returnObject?e.valueComparator(v,A):e.valueComparator(i.value,n.value)})||n)),R=S(()=>p.value.map(n=>n.props.value)),o=H(!1),d=S(()=>t.value?e.closeText:e.openText);let f="",y;const C=S(()=>e.hideSelected?a.value.filter(n=>!p.value.some(i=>i===n)):a.value),T=S(()=>e.hideNoData&&!a.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),I=M(),{onListScroll:ue,onListKeydown:ie}=He(I,h);function se(n){e.openOnClear&&(t.value=!0)}function ce(){T.value||(t.value=!t.value)}function re(n){var u,V;if(!n.key||e.readonly||g!=null&&g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(t.value=!0),["Escape","Tab"].includes(n.key)&&(t.value=!1),n.key==="Home"?(u=I.value)==null||u.focus("first"):n.key==="End"&&((V=I.value)==null||V.focus("last"));const i=1e3;function v(m){const P=m.key.length===1,w=!m.ctrlKey&&!m.metaKey&&!m.altKey;return P&&w}if(e.multiple||!v(n))return;const A=performance.now();A-y>i&&(f=""),f+=n.key.toLowerCase(),y=A;const K=a.value.find(m=>m.title.toLowerCase().startsWith(f));K!==void 0&&(r.value=[K])}function B(n){if(e.multiple){const i=R.value.findIndex(v=>e.valueComparator(v,n.value));if(i===-1)r.value=[...r.value,n];else{const v=[...r.value];v.splice(i,1),r.value=v}}else r.value=[n],t.value=!1}function de(n){var i;(i=I.value)!=null&&i.$el.contains(n.relatedTarget)||(t.value=!1)}function fe(){var n;o.value&&((n=h.value)==null||n.focus())}function me(n){o.value=!0}function ve(n){if(n==null)r.value=[];else if(J(h.value,":autofill")||J(h.value,":-webkit-autofill")){const i=a.value.find(v=>v.title===n);i&&B(i)}else h.value&&(h.value.value="")}return le(()=>{const n=!!(e.chips||l.chip),i=!!(!e.hideNoData||C.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),v=r.value.length>0,[A]=_.filterProps(e),K=v||!o.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(_,F({ref:h},A,{modelValue:r.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":ve,focused:o.value,"onUpdate:focused":u=>o.value=u,validationValue:r.externalValue,dirty:v,class:["v-select",{"v-select--active-menu":t.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:K,"onClick:clear":se,"onMousedown:control":ce,onBlur:de,onKeydown:re,"aria-label":c(d.value),title:c(d.value)}),{...l,default:()=>s(O,null,[s($e,F({ref:E,modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:fe},e.menuProps),{default:()=>[i&&s(Be,{ref:I,selected:R.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ie,onFocusin:me,onScrollPassive:ue,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var u,V,m;return[(u=l["prepend-item"])==null?void 0:u.call(l),!C.value.length&&!e.hideNoData&&(((V=l["no-data"])==null?void 0:V.call(l))??s(Q,{title:c(e.noDataText)},null)),s(Ke,{renderless:!0,items:C.value},{default:P=>{var N;let{item:w,index:b,itemRef:pe}=P;const q=F(w.props,{ref:pe,key:b,onClick:()=>B(w)});return((N=l.item)==null?void 0:N.call(l,{item:w,index:b,props:q}))??s(Q,q,{prepend:ye=>{let{isSelected:he}=ye;return s(O,null,[e.multiple&&!e.hideSelected?s(Me,{key:w.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependIcon&&s(Y,{icon:w.props.prependIcon},null)])}})}}),(m=l["append-item"])==null?void 0:m.call(l)]}})]}),p.value.map((u,V)=>{var w;function m(b){b.stopPropagation(),b.preventDefault(),B(u)}const P={"onClick:close":m,onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:u.value,class:"v-select__selection"},[n?l.chip?s(ae,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>{var b;return[(b=l.chip)==null?void 0:b.call(l,{item:u,index:V,props:P})]}}):s(Oe,F({key:"chip",closable:e.closableChips,size:"small",text:u.title},P),null):((w=l.selection)==null?void 0:w.call(l,{item:u,index:V}))??s("span",{class:"v-select__selection-text"},[u.title,e.multiple&&V<p.value.length-1&&s("span",{class:"v-select__selection-comma"},[Ee(",")])])])})]),"append-inner":function(){var P;for(var u=arguments.length,V=new Array(u),m=0;m<u;m++)V[m]=arguments[m];return s(O,null,[(P=l["append-inner"])==null?void 0:P.call(l,...V),e.menuIcon?s(Y,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),oe({isFocused:o,menu:t,select:B},h)}});export{Je as V};
