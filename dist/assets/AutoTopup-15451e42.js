import{P as S,Q as q,A as c,R as D,S as d,dB as P,B as f,T as w,y as o,D as e,J as r,E,Y as V,G as i,W as C,F as N,aq as U,cu as $,_ as j,C as F,Z as B,$ as H,H as J,I as M}from"./index-402c45ae.js";import{P as z}from"./topWrap-59b7623d.js";import{j as G}from"./constName-c3bc78a5.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{V as R}from"./VRow-4e242291.js";import{V as Q}from"./VSheet-2ee648a9.js";import{V as p}from"./VCol-069c33d0.js";/* empty css                                                                */const W=m=>(J("data-v-35292777"),m=m(),M(),m),Y={class:"bg-color ui-min-height"},Z={class:"topup-bg"},K={class:"px-3 pt-10"},O={class:"px-3 mt-n16"},X=W(()=>r("div",{class:"text-body-1"},"请选择充值金额",-1)),ee={__name:"AutoTopup",setup(m){const x=S(),y=q(),s=c(100),l=c({}),h=c([100,200,300,400,500,1e3]),u=c({min:0,max:0});c(""),D(async()=>{var t,n,a,_,v,b,g,k;if(!y.query.code){d.dispatch("snackbar/warning",{active:!0,body:"充值渠道不存在，请联系在线客服"});return}l.value=await P(y.query.code),(n=(t=l.value.ext)==null?void 0:t.amount_list)!=null&&n.list?(h.value=(_=(a=l.value.ext)==null?void 0:a.amount_list)==null?void 0:_.list,u.value.min=(b=(v=l.value.ext)==null?void 0:v.amount_list)==null?void 0:b.min,u.value.max=(k=(g=l.value.ext)==null?void 0:g.amount_list)==null?void 0:k.max):u.value.min=l.value.min});const T=()=>{if(u.value.min>0&&s.value<u.value.min){d.dispatch("snackbar/warning",{active:!0,body:"金额不能低于最低金额"});return}if(u.value.max>0&&s.value>u.value.max){d.dispatch("snackbar/warning",{active:!0,body:"金额超出本渠道的最大金额，请更换充值渠道或者联系在线客服"});return}if(l.value.id==""){I();return}d.dispatch("topUp/subPut",{amount:s.value,id:l.value.id,name:""}).then(t=>{if(t.type==0){window.open(t.url,"_blank");return}t.type==1&&A("/TopUp/unionpay",t.url)})},A=(t,n="")=>{x.push({path:t,query:{orderid:n}})},I=()=>{d.dispatch("snackbar/warning",{active:!0,body:"请选择充值渠道或联系在线客服！"})};return(t,n)=>(f(),w(V,null,[o(z,null,{headerCenter:e(()=>[i("充值")]),headerRight:e(()=>[r("p",{onClick:n[0]||(n[0]=a=>C(G)(C(x),"/Recordslist",{title:"充值审核记录"}))}," 账单 ")]),_:1}),r("div",Y,[r("div",Z,[r("div",K,[o(R,{class:"ma-0 pa-0 border-bottom-line"},{default:e(()=>[o(p,{class:"px-0",cols:"1"},{default:e(()=>[o(N,{color:"white"},{default:e(()=>[i("mdi-currency-cny")]),_:1})]),_:1}),o(p,{cols:"11"},{default:e(()=>[U(r("input",{type:"number",class:"amount",placeholder:"请输入充值金额","onUpdate:modelValue":n[1]||(n[1]=a=>s.value=a)},null,512),[[$,s.value]])]),_:1})]),_:1})])]),r("div",O,[o(Q,{class:"white rounded-lg py-4 px-3"},{default:e(()=>[X,o(R,{class:"ma-0 pa-0 mt-4"},{default:e(()=>[(f(!0),w(V,null,j(h.value,(a,_)=>(f(),F(p,{cols:"3",class:H(["mr-7 px-0 text-center rounded mb-3 border-line",{"money-bg-active":s.value===a,"money-bg":s.value!=a}]),key:_,onClick:v=>s.value=a},{default:e(()=>[i(" ¥"+B(a)+"元 ",1)]),_:2},1032,["onClick","class"]))),128)),o(p,{cols:"6",class:"pa-0 text-body-1 mt-2"},{default:e(()=>[i("应付金额")]),_:1}),o(p,{cols:"6",class:"pa-0 text-right text-body-1 text-red pr-6 mt-2"},{default:e(()=>[i("¥"+B(s.value)+"元",1)]),_:1})]),_:1})]),_:1}),o(E,{block:"",color:"#445CED",class:"text-white rounded-0 py-6 text-body-1 mt-8",style:{bottom:"0px"},onClick:T},{default:e(()=>[i("充值")]),_:1})])])],64))}},ie=L(ee,[["__scopeId","data-v-35292777"]]);export{ie as default};
