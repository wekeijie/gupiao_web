import{_ as R}from"./logonew-284aef04.js";import{u as q,a as B,p as _}from"./vaildRule-6f69ae7e.js";import{P as A,Q as U,A as u,an as L,R as N,aC as $,B as w,T,J as l,y as a,D as n,C as E,a1 as z,E as f,G as i,S as t,W as m,H as D,I as F}from"./index-47fc8dab.js";import{a as G}from"./js.cookie-edb2da2a.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{V as J}from"./VForm-7b5f5972.js";import{V as d}from"./VTextField-41384a6f.js";import{V as M}from"./VRow-a2a5129c.js";import{V as h}from"./VCol-1981e852.js";import{V as P}from"./VAlert-6c3c9784.js";import"./VInput-da574717.js";import"./index-fbd6c71b.js";const k=c=>(D("data-v-8b38ab46"),c=c(),F(),c),Q={class:"login-box"},W=k(()=>l("h1",null,"注册",-1)),j=k(()=>l("div",{class:"log-top"},[l("img",{src:R,class:"rounded-lg"})],-1)),K={class:"login-cont"},O={class:"flexEnd inlin-customer"},X={class:"sign-in-box"},Y={__name:"SignIn",setup(c){const y=A(),v=U();u("password");const e=L({username:"",phone:"",code:"",password:"",passwordAgo:"",recom:""}),g=u(null),b=u(!1),x=()=>{b.value=!0;let r=60;g.value=window.setInterval(()=>{r==0?V():r--},1e3)},V=()=>{clearInterval(g.value),b.value=!1},C=()=>{if(e.phone.length<6||e.phone.length>11){t.dispatch("snackbar/warning",{active:!0,body:"请输入正确的手机号码"});return}x(),t.dispatch("user/sendSms",e.phone).then(r=>{t.dispatch("snackbar/success",{active:!0,body:"发送成功"})}).catch(()=>{V()})},I=async()=>{if(e.password.length<6){t.dispatch("snackbar/warning",{active:!0,body:"密码长度不能小于6位"});return}if(e.password!=e.passwordAgo){t.dispatch("snackbar/warning",{active:!0,body:"两次密码不一致"});return}if(e.code.length!=4){t.dispatch("snackbar/warning",{active:!0,body:"请输入正确的验证码"});return}if(e.username.length<3){t.dispatch("snackbar/warning",{active:!0,body:"账号长度不能小于3位"});return}if(e.phone.length<11){t.dispatch("snackbar/warning",{active:!0,body:"请输入正确的手机号码"});return}t.dispatch("user/register",{user_name:e.username,mobile:e.phone,password:e.password,verify_code:e.code,referrer:e.recom}).then(r=>{t.dispatch("snackbar/success",{active:!0,body:"注册成功！"}),p("Login")})};u();const S=u(0);N(()=>{const r=G.get("referrer");v.query.code?e.recom=v.query.code:r&&(e.recom=r),$()});const p=r=>{y.push(r)};return(r,o)=>(w(),T("div",Q,[W,j,l("div",K,[a(J,{ref:"form"},{default:n(()=>[a(d,{variant:"underlined",modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=s=>e.username=s),required:"",counter:12,clearable:"",label:"账号","hide-details":"auto",rules:m(q)},null,8,["modelValue","rules"]),a(d,{variant:"underlined",modelValue:e.phone,"onUpdate:modelValue":o[1]||(o[1]=s=>e.phone=s),required:"",counter:12,clearable:"",active:"",label:"手机号","hide-details":"auto",rules:m(B)},null,8,["modelValue","rules"]),a(M,{class:"ma-0 pa-0"},{default:n(()=>[a(h,{cols:"8",class:"pa-0"},{default:n(()=>[a(d,{variant:"underlined",modelValue:e.code,"onUpdate:modelValue":o[2]||(o[2]=s=>e.code=s),required:"",counter:4,label:"验证码",type:"Number"},null,8,["modelValue"])]),_:1}),a(h,{cols:"4",class:"px-1"},{default:n(()=>[a(f,{class:"text-none",color:"success",rounded:"",block:"",variant:"outlined",onClick:C,disabled:b.value},{default:n(()=>[i(" 发送 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),a(d,{variant:"underlined",modelValue:e.password,"onUpdate:modelValue":o[3]||(o[3]=s=>e.password=s),required:"",label:"密码",type:"password",rules:m(_)},null,8,["modelValue","rules"]),a(d,{variant:"underlined",modelValue:e.passwordAgo,"onUpdate:modelValue":o[4]||(o[4]=s=>e.passwordAgo=s),required:"",label:"确认密码",type:"password",rules:m(_)},null,8,["modelValue","rules"]),a(d,{variant:"underlined",modelValue:e.recom,"onUpdate:modelValue":o[5]||(o[5]=s=>e.recom=s),counter:12,label:"推荐人"},null,8,["modelValue"]),l("div",O,[l("p",null,[i(" 提示收不到验证码时请联系 "),l("span",{onClick:o[6]||(o[6]=s=>p("/online-service"))},"在线客服")])])]),_:1},512),S.value>55?(w(),E(P,{key:0,text:"发送成功"})):z("",!0),a(f,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:I},{default:n(()=>[i(" 注册 ")]),_:1}),a(f,{color:"rgb(0, 191, 255)",class:"mt-4",size:"x-large",block:"",onClick:o[7]||(o[7]=s=>p("/"))},{default:n(()=>[i(" 返回 ")]),_:1}),l("div",X,[i(" 已有账号?"),l("span",{onClick:o[8]||(o[8]=s=>p("/Login"))},"马上登陆")])])]))}},ce=H(Y,[["__scopeId","data-v-8b38ab46"]]);export{ce as default};
