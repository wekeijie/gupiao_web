import{L as b,z as c,ac as k,N as y,aj as C,A as u,P as m,x as t,C as o,I as r,D as I,O as d,F as _,S as f,W as R,G as E,H as w}from"./index-6733c89f.js";import{P as S}from"./topWrap-cab131ed.js";import{e as z,p as N}from"./vaildRule-ed4f3a0e.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{V as B}from"./VForm-b471e2fa.js";import{V as v}from"./VTextField-0b7600ed.js";import{V as D}from"./VDivider-c2c60a7c.js";/* empty css                                                                */import"./VInput-fcb9631f.js";import"./index-981ea4f0.js";const h=i=>(E("data-v-377d188f"),i=i(),w(),i),F={class:"login-box"},P=h(()=>r("p",null,"邮箱地址",-1)),Z=h(()=>r("p",null,"回执码",-1)),q={key:0},H={key:1},L={class:"login-box"},T={__name:"RealEmail",setup(i){b(),c("password");const e=k({email:"",code:""}),a=c(0),V=()=>{if(!x(e.email)){d.dispatch("snackbar/warning",{active:!0,body:"请输入有效的邮件地址"});return}a.value=60,d.dispatch("user/sendEmailCode",e.email).then(()=>{let s=setInterval(()=>{a.value--,a.value<=0&&(a.value=0,clearInterval(s))},1e3)})},x=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s),g=async()=>{const{valid:s}=await p.ctx.$refs.form.validate();s&&d.dispatch("user/changEmail",e).then(()=>{d.dispatch("snackbar/success",{active:!0,body:"修改成功"})})};let p=c();return y(()=>{p=C()}),(s,l)=>(u(),m("div",null,[t(S,null,{headerCenter:o(()=>[_("绑定邮箱")]),_:1}),r("div",F,[t(B,{ref:"form"},{default:o(()=>[t(v,{variant:"underlined",modelValue:e.email,"onUpdate:modelValue":l[0]||(l[0]=n=>e.email=n),required:"",clearable:"",label:"请输入您的邮箱地址","hide-details":"auto",rules:f(z)},{prepend:o(()=>[P]),_:1},8,["modelValue","rules"]),t(v,{variant:"underlined",modelValue:e.code,"onUpdate:modelValue":l[1]||(l[1]=n=>e.code=n),required:"",counter:12,label:"请输入回执码",type:"Number",rules:f(N)},{prepend:o(()=>[Z]),default:o(()=>[r("div",{class:"send-code",onClick:V},[a.value==0?(u(),m("p",q,"点击获取")):(u(),m("p",H,"重新获取("+R(a.value)+")",1))])]),_:1},8,["modelValue","rules"])]),_:1},512)]),t(D,{thickness:3}),r("div",L,[t(I,{color:"#fb5c39",class:"mt-4",size:"x-large",block:"",onClick:g},{default:o(()=>[_(" 修改邮箱 ")]),_:1})])]))}},X=A(T,[["__scopeId","data-v-377d188f"]]);export{X as default};
