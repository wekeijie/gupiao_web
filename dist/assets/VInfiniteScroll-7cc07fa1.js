import{p as $,K as E,f as N,aa as D,i as H,A as W,ab as y,q as B,R as G,ac as K,L as O,x as P,ad as U,a5 as j,y as a,G as J,z as Q,ae as z,E as X,af as C}from"./index-62beb134.js";const Y=$({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...E(),...N()},"VInfiniteScroll"),q=D({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,u)=>!0},setup(e,u){let{emit:n}=u;const{intersectionRef:f,isIntersecting:r}=U();return j(r,async c=>{n("intersect",e.side,c)}),P(()=>a("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:f},[J("Â ")])),{}}}),p=H()({name:"VInfiniteScroll",props:Y(),emits:{load:e=>!0},setup(e,u){let{slots:n,emit:f}=u;const r=W(),c=y("ok"),m=y("ok"),I=B(()=>Q(e.margin)),v=y(!1);function g(t){if(!r.value)return;const i=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[i]=t}function F(){if(!r.value)return 0;const t=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[t]}function d(){if(!r.value)return 0;const t=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[t]}function L(){if(!r.value)return 0;const t=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[t]}G(()=>{r.value&&(e.side==="start"?g(d()):e.side==="both"&&g(d()/2-L()/2))});function h(t,i){t==="start"?c.value=i:t==="end"&&(m.value=i)}function R(t){return t==="start"?c.value:m.value}let V=0;function k(t,i){v.value=i,v.value&&S(t)}function S(t){if(e.mode!=="manual"&&!v.value)return;const i=R(t);if(!r.value||["empty","loading"].includes(i))return;V=d(),h(t,"loading");function l(o){h(t,o),C(()=>{o==="empty"||o==="error"||(o==="ok"&&t==="start"&&g(d()-V+F()),e.mode!=="manual"&&C(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{S(t)})})})}))})}f("load",{side:t,done:l})}const{t:T}=K();function x(t,i){var s,M,b,w,A;if(e.side!==t&&e.side!=="both")return;const l=()=>S(t),o={side:t,props:{onClick:l,color:e.color}};return i==="error"?(s=n.error)==null?void 0:s.call(n,o):i==="empty"?((M=n.empty)==null?void 0:M.call(n,o))??a("div",null,[T(e.emptyText)]):e.mode==="manual"?i==="loading"?((b=n.loading)==null?void 0:b.call(n,o))??a(z,{indeterminate:!0,color:e.color},null):((w=n["load-more"])==null?void 0:w.call(n,o))??a(X,{variant:"outlined",color:e.color,onClick:l},{default:()=>[T(e.loadMoreText)]}):((A=n.loading)==null?void 0:A.call(n,o))??a(z,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:_}=O(e);P(()=>{const t=e.tag,i=e.side==="start"||e.side==="both",l=e.side==="end"||e.side==="both",o=e.mode==="intersect";return a(t,{ref:r,class:["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":i,"v-infinite-scroll--end":l}],style:_.value},{default:()=>{var s;return[a("div",{class:"v-infinite-scroll__side"},[x("start",c.value)]),i&&o&&a(q,{key:"start",side:"start",onIntersect:k,rootMargin:I.value},null),(s=n.default)==null?void 0:s.call(n),l&&o&&a(q,{key:"end",side:"end",onIntersect:k,rootMargin:I.value},null),a("div",{class:"v-infinite-scroll__side"},[x("end",m.value)])]}})})}});export{p as V};
